webpackHotUpdate(0,{

/***/ 170:
/***/ function(module, exports, __webpack_require__) {

	eval("/* WEBPACK VAR INJECTION */(function(module) {/* REACT HOT LOADER */ if (true) { (function () { var ReactHotAPI = __webpack_require__(3), RootInstanceProvider = __webpack_require__(11), ReactMount = __webpack_require__(13), React = __webpack_require__(67); module.makeHot = module.hot.data ? module.hot.data.makeHot : ReactHotAPI(function () { return RootInstanceProvider.getRootInstances(ReactMount); }, React); })(); } try { (function () {\n\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar jQuery = window.jQuery = window.$ = __webpack_require__(171);\n\n__webpack_require__(173);\n\n// Yii 2\n__webpack_require__(218);\n__webpack_require__(219);\n__webpack_require__(220);\n__webpack_require__(221);\n__webpack_require__(222);\n\nexports['default'] = jQuery;\nmodule.exports = exports['default'];\n\n/* REACT HOT LOADER */ }).call(this); } finally { if (true) { (function () { var foundReactClasses = module.hot.data && module.hot.data.foundReactClasses || false; if (module.exports && module.makeHot) { var makeExportsHot = __webpack_require__(174); if (makeExportsHot(module, __webpack_require__(67))) { foundReactClasses = true; } var shouldAcceptModule = true && foundReactClasses; if (shouldAcceptModule) { module.hot.accept(function (err) { if (err) { console.error(\"Cannot not apply hot update to \" + \"jquery.js\" + \": \" + err.message); } }); } } module.hot.dispose(function (data) { data.makeHot = module.makeHot; data.foundReactClasses = foundReactClasses; }); })(); } }\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)(module)))//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvc2hpbXMvanF1ZXJ5LmpzP2E2NTkiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxtQkFBTyxDQUFDLEdBQXdCLENBQUMsQ0FBQzs7QUFFNUUsbUJBQU8sQ0FBQyxHQUFvRCxDQUFDLENBQUM7OztBQUc5RCxtQkFBTyxDQUFDLEdBQW9ELENBQUMsQ0FBQztBQUM5RCxtQkFBTyxDQUFDLEdBQStELENBQUMsQ0FBQztBQUN6RSxtQkFBTyxDQUFDLEdBQTZELENBQUMsQ0FBQztBQUN2RSxtQkFBTyxDQUFDLEdBQStELENBQUMsQ0FBQztBQUN6RSxtQkFBTyxDQUFDLEdBQTRELENBQUMsQ0FBQzs7cUJBRXZELE1BQU0iLCJmaWxlIjoiMTcwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgalF1ZXJ5ID0gd2luZG93LmpRdWVyeSA9IHdpbmRvdy4kID0gcmVxdWlyZSgnanF1ZXJ5L2Rpc3QvanF1ZXJ5Lm1pbicpO1xyXG5cclxucmVxdWlyZSgnYm9vdHN0cmFwLXNhc3MvYXNzZXRzL2phdmFzY3JpcHRzL2Jvb3RzdHJhcC5taW4uanMnKTtcclxuXHJcbi8vIFlpaSAyXHJcbnJlcXVpcmUoJy4uLy4uLy4uL2JhY2tlbmQvdmVuZG9yL3lpaXNvZnQveWlpMi9hc3NldHMveWlpLmpzJyk7XHJcbnJlcXVpcmUoJy4uLy4uLy4uL2JhY2tlbmQvdmVuZG9yL3lpaXNvZnQveWlpMi9hc3NldHMveWlpLnZhbGlkYXRpb24uanMnKTtcclxucmVxdWlyZSgnLi4vLi4vLi4vYmFja2VuZC92ZW5kb3IveWlpc29mdC95aWkyL2Fzc2V0cy95aWkuZ3JpZFZpZXcuanMnKTtcclxucmVxdWlyZSgnLi4vLi4vLi4vYmFja2VuZC92ZW5kb3IveWlpc29mdC95aWkyL2Fzc2V0cy95aWkuYWN0aXZlRm9ybS5qcycpO1xyXG5yZXF1aXJlKCcuLi8uLi8uLi9iYWNrZW5kL3ZlbmRvci95aWlzb2Z0L3lpaTIvYXNzZXRzL3lpaS5jYXB0Y2hhLmpzJyk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBqUXVlcnk7XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvc2hpbXMvanF1ZXJ5LmpzXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },

/***/ 219:
/***/ function(module, exports) {

	eval("/**\n * Yii validation module.\n *\n * This JavaScript module provides the validation methods for the built-in validators.\n *\n * @link http://www.yiiframework.com/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http://www.yiiframework.com/license/\n * @author Qiang Xue <qiang.xue@gmail.com>\n * @since 2.0\n */\n\nyii.validation = (function ($) {\n    var pub = {\n        isEmpty: function (value) {\n            return value === null || value === undefined || value == [] || value === '';\n        },\n\n        addMessage: function (messages, message, value) {\n            messages.push(message.replace(/\\{value\\}/g, value));\n        },\n\n        required: function (value, messages, options) {\n            var valid = false;\n            if (options.requiredValue === undefined) {\n                var isString = typeof value == 'string' || value instanceof String;\n                if (options.strict && value !== undefined || !options.strict && !pub.isEmpty(isString ? $.trim(value) : value)) {\n                    valid = true;\n                }\n            } else if (!options.strict && value == options.requiredValue || options.strict && value === options.requiredValue) {\n                valid = true;\n            }\n\n            if (!valid) {\n                pub.addMessage(messages, options.message, value);\n            }\n        },\n\n        'boolean': function (value, messages, options) {\n            if (options.skipOnEmpty && pub.isEmpty(value)) {\n                return;\n            }\n            var valid = !options.strict && (value == options.trueValue || value == options.falseValue)\n                || options.strict && (value === options.trueValue || value === options.falseValue);\n\n            if (!valid) {\n                pub.addMessage(messages, options.message, value);\n            }\n        },\n\n        string: function (value, messages, options) {\n            if (options.skipOnEmpty && pub.isEmpty(value)) {\n                return;\n            }\n\n            if (typeof value !== 'string') {\n                pub.addMessage(messages, options.message, value);\n                return;\n            }\n\n            if (options.min !== undefined && value.length < options.min) {\n                pub.addMessage(messages, options.tooShort, value);\n            }\n            if (options.max !== undefined && value.length > options.max) {\n                pub.addMessage(messages, options.tooLong, value);\n            }\n            if (options.is !== undefined && value.length != options.is) {\n                pub.addMessage(messages, options.notEqual, value);\n            }\n        },\n\n        file: function (attribute, messages, options) {\n            var files = getUploadedFiles(attribute, messages, options);\n            $.each(files, function (i, file) {\n                validateFile(file, messages, options);\n            });\n        },\n\n        image: function (attribute, messages, options, deferred) {\n            var files = getUploadedFiles(attribute, messages, options);\n\n            $.each(files, function (i, file) {\n                validateFile(file, messages, options);\n\n                // Skip image validation if FileReader API is not available\n                if (typeof FileReader === \"undefined\") {\n                    return;\n                }\n\n                var def = $.Deferred(),\n                    fr = new FileReader(),\n                    img = new Image();\n\n                img.onload = function () {\n                    if (options.minWidth && this.width < options.minWidth) {\n                        messages.push(options.underWidth.replace(/\\{file\\}/g, file.name));\n                    }\n\n                    if (options.maxWidth && this.width > options.maxWidth) {\n                        messages.push(options.overWidth.replace(/\\{file\\}/g, file.name));\n                    }\n\n                    if (options.minHeight && this.height < options.minHeight) {\n                        messages.push(options.underHeight.replace(/\\{file\\}/g, file.name));\n                    }\n\n                    if (options.maxHeight && this.height > options.maxHeight) {\n                        messages.push(options.overHeight.replace(/\\{file\\}/g, file.name));\n                    }\n                    def.resolve();\n                };\n\n                img.onerror = function () {\n                    messages.push(options.notImage.replace(/\\{file\\}/g, file.name));\n                    def.resolve();\n                };\n\n                fr.onload = function () {\n                    img.src = fr.result;\n                };\n\n                // Resolve deferred if there was error while reading data\n                fr.onerror = function () {\n                    def.resolve();\n                };\n\n                fr.readAsDataURL(file);\n\n                deferred.push(def);\n            });\n\n        },\n\n        number: function (value, messages, options) {\n            if (options.skipOnEmpty && pub.isEmpty(value)) {\n                return;\n            }\n\n            if (typeof value === 'string' && !value.match(options.pattern)) {\n                pub.addMessage(messages, options.message, value);\n                return;\n            }\n\n            if (options.min !== undefined && value < options.min) {\n                pub.addMessage(messages, options.tooSmall, value);\n            }\n            if (options.max !== undefined && value > options.max) {\n                pub.addMessage(messages, options.tooBig, value);\n            }\n        },\n\n        range: function (value, messages, options) {\n            if (options.skipOnEmpty && pub.isEmpty(value)) {\n                return;\n            }\n\n            if (!options.allowArray && $.isArray(value)) {\n                pub.addMessage(messages, options.message, value);\n                return;\n            }\n\n            var inArray = true;\n\n            $.each($.isArray(value) ? value : [value], function (i, v) {\n                if ($.inArray(v, options.range) == -1) {\n                    inArray = false;\n                    return false;\n                } else {\n                    return true;\n                }\n            });\n\n            if (options.not === inArray) {\n                pub.addMessage(messages, options.message, value);\n            }\n        },\n\n        regularExpression: function (value, messages, options) {\n            if (options.skipOnEmpty && pub.isEmpty(value)) {\n                return;\n            }\n\n            if (!options.not && !value.match(options.pattern) || options.not && value.match(options.pattern)) {\n                pub.addMessage(messages, options.message, value);\n            }\n        },\n\n        email: function (value, messages, options) {\n            if (options.skipOnEmpty && pub.isEmpty(value)) {\n                return;\n            }\n\n            var valid = true;\n\n\n            var regexp = /^((?:\"?([^\"]*)\"?\\s)?)(?:\\s+)?(?:(<?)((.+)@([^>]+))(>?))$/,\n                matches = regexp.exec(value);\n\n            if (matches === null) {\n                valid = false\n            } else {\n                if (options.enableIDN) {\n                    matches[5] = punycode.toASCII(matches[5]);\n                    matches[6] = punycode.toASCII(matches[6]);\n\n                    value = matches[1] + matches[3] + matches[5] + '@' + matches[6] + matches[7];\n                }\n\n                if (matches[5].length > 64) {\n                    valid = false;\n                } else if ((matches[5] + '@' + matches[6]).length > 254) {\n                    valid = false;\n                } else {\n                    valid = value.match(options.pattern) || (options.allowName && value.match(options.fullPattern));\n                }\n            }\n\n            if (!valid) {\n                pub.addMessage(messages, options.message, value);\n            }\n        },\n\n        url: function (value, messages, options) {\n            if (options.skipOnEmpty && pub.isEmpty(value)) {\n                return;\n            }\n\n            if (options.defaultScheme && !value.match(/:\\/\\//)) {\n                value = options.defaultScheme + '://' + value;\n            }\n\n            var valid = true;\n\n            if (options.enableIDN) {\n                var regexp = /^([^:]+):\\/\\/([^\\/]+)(.*)$/,\n                    matches = regexp.exec(value);\n                if (matches === null) {\n                    valid = false;\n                } else {\n                    value = matches[1] + '://' + punycode.toASCII(matches[2]) + matches[3];\n                }\n            }\n\n            if (!valid || !value.match(options.pattern)) {\n                pub.addMessage(messages, options.message, value);\n            }\n        },\n\n        trim: function ($form, attribute, options) {\n            var $input = $form.find(attribute.input);\n            var value = $input.val();\n            if (!options.skipOnEmpty || !pub.isEmpty(value)) {\n                value = $.trim(value);\n                $input.val(value);\n            }\n            return value;\n        },\n\n        captcha: function (value, messages, options) {\n            if (options.skipOnEmpty && pub.isEmpty(value)) {\n                return;\n            }\n\n            // CAPTCHA may be updated via AJAX and the updated hash is stored in body data\n            var hash = $('body').data(options.hashKey);\n            if (hash == null) {\n                hash = options.hash;\n            } else {\n                hash = hash[options.caseSensitive ? 0 : 1];\n            }\n            var v = options.caseSensitive ? value : value.toLowerCase();\n            for (var i = v.length - 1, h = 0; i >= 0; --i) {\n                h += v.charCodeAt(i);\n            }\n            if (h != hash) {\n                pub.addMessage(messages, options.message, value);\n            }\n        },\n\n        compare: function (value, messages, options) {\n            if (options.skipOnEmpty && pub.isEmpty(value)) {\n                return;\n            }\n\n            var compareValue, valid = true;\n            if (options.compareAttribute === undefined) {\n                compareValue = options.compareValue;\n            } else {\n                compareValue = $('#' + options.compareAttribute).val();\n            }\n\n            if (options.type === 'number') {\n                value = parseFloat(value);\n                compareValue = parseFloat(compareValue);\n            }\n            switch (options.operator) {\n                case '==':\n                    valid = value == compareValue;\n                    break;\n                case '===':\n                    valid = value === compareValue;\n                    break;\n                case '!=':\n                    valid = value != compareValue;\n                    break;\n                case '!==':\n                    valid = value !== compareValue;\n                    break;\n                case '>':\n                    valid = value > compareValue;\n                    break;\n                case '>=':\n                    valid = value >= compareValue;\n                    break;\n                case '<':\n                    valid = value < compareValue;\n                    break;\n                case '<=':\n                    valid = value <= compareValue;\n                    break;\n                default:\n                    valid = false;\n                    break;\n            }\n\n            if (!valid) {\n                pub.addMessage(messages, options.message, value);\n            }\n        },\n\n        ip: function (value, messages, options) {\n            var getIpVersion = function (value) {\n                return value.indexOf(':') === -1 ? 4 : 6;\n            };\n\n            var negation = null, cidr = null;\n\n            if (options.skipOnEmpty && pub.isEmpty(value)) {\n                return;\n            }\n\n            var matches = new RegExp(options.ipParsePattern).exec(value);\n            if (matches) {\n                negation = matches[1] || null;\n                value = matches[2];\n                cidr = matches[4] || null;\n            }\n\n            if (options.subnet === true && cidr === null) {\n                pub.addMessage(messages, options.messages.noSubnet, value);\n                return;\n            }\n            if (options.subnet === false && cidr !== null) {\n                pub.addMessage(messages, options.messages.hasSubnet, value);\n                return;\n            }\n            if (options.negation === false && negation !== null) {\n                pub.addMessage(messages, options.messages.message, value);\n                return;\n            }\n\n            if (getIpVersion(value) == 6) {\n                if (!options.ipv6) {\n                    pub.addMessage(messages, options.messages.ipv6NotAllowed, value);\n                }\n                if (!(new RegExp(options.ipv6Pattern)).test(value)) {\n                    pub.addMessage(messages, options.messages.message, value);\n                }\n            } else {\n                if (!options.ipv4) {\n                    pub.addMessage(messages, options.messages.ipv4NotAllowed, value);\n                }\n                if (!(new RegExp(options.ipv4Pattern)).test(value)) {\n                    pub.addMessage(messages, options.messages.message, value);\n                }\n            }\n        }\n    };\n\n    function getUploadedFiles(attribute, messages, options) {\n        // Skip validation if File API is not available\n        if (typeof File === \"undefined\") {\n            return [];\n        }\n\n        var files = $(attribute.input).get(0).files;\n        if (!files) {\n            messages.push(options.message);\n            return [];\n        }\n\n        if (files.length === 0) {\n            if (!options.skipOnEmpty) {\n                messages.push(options.uploadRequired);\n            }\n            return [];\n        }\n\n        if (options.maxFiles && options.maxFiles < files.length) {\n            messages.push(options.tooMany);\n            return [];\n        }\n\n        return files;\n    }\n\n    function validateFile(file, messages, options) {\n        if (options.extensions && options.extensions.length > 0) {\n            var index, ext;\n\n            index = file.name.lastIndexOf('.');\n\n            if (!~index) {\n                ext = '';\n            } else {\n                ext = file.name.substr(index + 1, file.name.length).toLowerCase();\n            }\n\n            if (!~options.extensions.indexOf(ext)) {\n                messages.push(options.wrongExtension.replace(/\\{file\\}/g, file.name));\n            }\n        }\n\n        if (options.mimeTypes && options.mimeTypes.length > 0) {\n            if (!~options.mimeTypes.indexOf(file.type)) {\n                messages.push(options.wrongMimeType.replace(/\\{file\\}/g, file.name));\n            }\n        }\n\n        if (options.maxSize && options.maxSize < file.size) {\n            messages.push(options.tooBig.replace(/\\{file\\}/g, file.name));\n        }\n\n        if (options.minSize && options.minSize > file.size) {\n            messages.push(options.tooSmall.replace(/\\{file\\}/g, file.name));\n        }\n    }\n\n    return pub;\n})(jQuery);\n//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vYmFja2VuZC92ZW5kb3IveWlpc29mdC95aWkyL2Fzc2V0cy95aWkudmFsaWRhdGlvbi5qcz9iOGVkIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0EsNkNBQTZDLE9BQU87QUFDcEQsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTOztBQUVUO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9FQUFvRSxNQUFNO0FBQzFFOztBQUVBO0FBQ0EsbUVBQW1FLE1BQU07QUFDekU7O0FBRUE7QUFDQSxxRUFBcUUsTUFBTTtBQUMzRTs7QUFFQTtBQUNBLG9FQUFvRSxNQUFNO0FBQzFFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhEQUE4RCxNQUFNO0FBQ3BFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsYUFBYTs7QUFFYixTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsUUFBUTtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQSxnRUFBZ0UsTUFBTTtBQUN0RTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwrREFBK0QsTUFBTTtBQUNyRTtBQUNBOztBQUVBO0FBQ0Esb0RBQW9ELE1BQU07QUFDMUQ7O0FBRUE7QUFDQSxzREFBc0QsTUFBTTtBQUM1RDtBQUNBOztBQUVBO0FBQ0EsQ0FBQyIsImZpbGUiOiIyMTkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFlpaSB2YWxpZGF0aW9uIG1vZHVsZS5cbiAqXG4gKiBUaGlzIEphdmFTY3JpcHQgbW9kdWxlIHByb3ZpZGVzIHRoZSB2YWxpZGF0aW9uIG1ldGhvZHMgZm9yIHRoZSBidWlsdC1pbiB2YWxpZGF0b3JzLlxuICpcbiAqIEBsaW5rIGh0dHA6Ly93d3cueWlpZnJhbWV3b3JrLmNvbS9cbiAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IChjKSAyMDA4IFlpaSBTb2Z0d2FyZSBMTENcbiAqIEBsaWNlbnNlIGh0dHA6Ly93d3cueWlpZnJhbWV3b3JrLmNvbS9saWNlbnNlL1xuICogQGF1dGhvciBRaWFuZyBYdWUgPHFpYW5nLnh1ZUBnbWFpbC5jb20+XG4gKiBAc2luY2UgMi4wXG4gKi9cblxueWlpLnZhbGlkYXRpb24gPSAoZnVuY3Rpb24gKCQpIHtcbiAgICB2YXIgcHViID0ge1xuICAgICAgICBpc0VtcHR5OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09IFtdIHx8IHZhbHVlID09PSAnJztcbiAgICAgICAgfSxcblxuICAgICAgICBhZGRNZXNzYWdlOiBmdW5jdGlvbiAobWVzc2FnZXMsIG1lc3NhZ2UsIHZhbHVlKSB7XG4gICAgICAgICAgICBtZXNzYWdlcy5wdXNoKG1lc3NhZ2UucmVwbGFjZSgvXFx7dmFsdWVcXH0vZywgdmFsdWUpKTtcbiAgICAgICAgfSxcblxuICAgICAgICByZXF1aXJlZDogZnVuY3Rpb24gKHZhbHVlLCBtZXNzYWdlcywgb3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIHZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5yZXF1aXJlZFZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgaXNTdHJpbmcgPSB0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycgfHwgdmFsdWUgaW5zdGFuY2VvZiBTdHJpbmc7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3RyaWN0ICYmIHZhbHVlICE9PSB1bmRlZmluZWQgfHwgIW9wdGlvbnMuc3RyaWN0ICYmICFwdWIuaXNFbXB0eShpc1N0cmluZyA/ICQudHJpbSh2YWx1ZSkgOiB2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIW9wdGlvbnMuc3RyaWN0ICYmIHZhbHVlID09IG9wdGlvbnMucmVxdWlyZWRWYWx1ZSB8fCBvcHRpb25zLnN0cmljdCAmJiB2YWx1ZSA9PT0gb3B0aW9ucy5yZXF1aXJlZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFsaWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcHViLmFkZE1lc3NhZ2UobWVzc2FnZXMsIG9wdGlvbnMubWVzc2FnZSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgICdib29sZWFuJzogZnVuY3Rpb24gKHZhbHVlLCBtZXNzYWdlcywgb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2tpcE9uRW1wdHkgJiYgcHViLmlzRW1wdHkodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHZhbGlkID0gIW9wdGlvbnMuc3RyaWN0ICYmICh2YWx1ZSA9PSBvcHRpb25zLnRydWVWYWx1ZSB8fCB2YWx1ZSA9PSBvcHRpb25zLmZhbHNlVmFsdWUpXG4gICAgICAgICAgICAgICAgfHwgb3B0aW9ucy5zdHJpY3QgJiYgKHZhbHVlID09PSBvcHRpb25zLnRydWVWYWx1ZSB8fCB2YWx1ZSA9PT0gb3B0aW9ucy5mYWxzZVZhbHVlKTtcblxuICAgICAgICAgICAgaWYgKCF2YWxpZCkge1xuICAgICAgICAgICAgICAgIHB1Yi5hZGRNZXNzYWdlKG1lc3NhZ2VzLCBvcHRpb25zLm1lc3NhZ2UsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzdHJpbmc6IGZ1bmN0aW9uICh2YWx1ZSwgbWVzc2FnZXMsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnNraXBPbkVtcHR5ICYmIHB1Yi5pc0VtcHR5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBwdWIuYWRkTWVzc2FnZShtZXNzYWdlcywgb3B0aW9ucy5tZXNzYWdlLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5taW4gIT09IHVuZGVmaW5lZCAmJiB2YWx1ZS5sZW5ndGggPCBvcHRpb25zLm1pbikge1xuICAgICAgICAgICAgICAgIHB1Yi5hZGRNZXNzYWdlKG1lc3NhZ2VzLCBvcHRpb25zLnRvb1Nob3J0LCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5tYXggIT09IHVuZGVmaW5lZCAmJiB2YWx1ZS5sZW5ndGggPiBvcHRpb25zLm1heCkge1xuICAgICAgICAgICAgICAgIHB1Yi5hZGRNZXNzYWdlKG1lc3NhZ2VzLCBvcHRpb25zLnRvb0xvbmcsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmlzICE9PSB1bmRlZmluZWQgJiYgdmFsdWUubGVuZ3RoICE9IG9wdGlvbnMuaXMpIHtcbiAgICAgICAgICAgICAgICBwdWIuYWRkTWVzc2FnZShtZXNzYWdlcywgb3B0aW9ucy5ub3RFcXVhbCwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGZpbGU6IGZ1bmN0aW9uIChhdHRyaWJ1dGUsIG1lc3NhZ2VzLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgZmlsZXMgPSBnZXRVcGxvYWRlZEZpbGVzKGF0dHJpYnV0ZSwgbWVzc2FnZXMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgJC5lYWNoKGZpbGVzLCBmdW5jdGlvbiAoaSwgZmlsZSkge1xuICAgICAgICAgICAgICAgIHZhbGlkYXRlRmlsZShmaWxlLCBtZXNzYWdlcywgb3B0aW9ucyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBpbWFnZTogZnVuY3Rpb24gKGF0dHJpYnV0ZSwgbWVzc2FnZXMsIG9wdGlvbnMsIGRlZmVycmVkKSB7XG4gICAgICAgICAgICB2YXIgZmlsZXMgPSBnZXRVcGxvYWRlZEZpbGVzKGF0dHJpYnV0ZSwgbWVzc2FnZXMsIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICAkLmVhY2goZmlsZXMsIGZ1bmN0aW9uIChpLCBmaWxlKSB7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGVGaWxlKGZpbGUsIG1lc3NhZ2VzLCBvcHRpb25zKTtcblxuICAgICAgICAgICAgICAgIC8vIFNraXAgaW1hZ2UgdmFsaWRhdGlvbiBpZiBGaWxlUmVhZGVyIEFQSSBpcyBub3QgYXZhaWxhYmxlXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBGaWxlUmVhZGVyID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgZGVmID0gJC5EZWZlcnJlZCgpLFxuICAgICAgICAgICAgICAgICAgICBmciA9IG5ldyBGaWxlUmVhZGVyKCksXG4gICAgICAgICAgICAgICAgICAgIGltZyA9IG5ldyBJbWFnZSgpO1xuXG4gICAgICAgICAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubWluV2lkdGggJiYgdGhpcy53aWR0aCA8IG9wdGlvbnMubWluV2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzLnB1c2gob3B0aW9ucy51bmRlcldpZHRoLnJlcGxhY2UoL1xce2ZpbGVcXH0vZywgZmlsZS5uYW1lKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5tYXhXaWR0aCAmJiB0aGlzLndpZHRoID4gb3B0aW9ucy5tYXhXaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXMucHVzaChvcHRpb25zLm92ZXJXaWR0aC5yZXBsYWNlKC9cXHtmaWxlXFx9L2csIGZpbGUubmFtZSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubWluSGVpZ2h0ICYmIHRoaXMuaGVpZ2h0IDwgb3B0aW9ucy5taW5IZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzLnB1c2gob3B0aW9ucy51bmRlckhlaWdodC5yZXBsYWNlKC9cXHtmaWxlXFx9L2csIGZpbGUubmFtZSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubWF4SGVpZ2h0ICYmIHRoaXMuaGVpZ2h0ID4gb3B0aW9ucy5tYXhIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzLnB1c2gob3B0aW9ucy5vdmVySGVpZ2h0LnJlcGxhY2UoL1xce2ZpbGVcXH0vZywgZmlsZS5uYW1lKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGVmLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgaW1nLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzLnB1c2gob3B0aW9ucy5ub3RJbWFnZS5yZXBsYWNlKC9cXHtmaWxlXFx9L2csIGZpbGUubmFtZSkpO1xuICAgICAgICAgICAgICAgICAgICBkZWYucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBmci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGltZy5zcmMgPSBmci5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8vIFJlc29sdmUgZGVmZXJyZWQgaWYgdGhlcmUgd2FzIGVycm9yIHdoaWxlIHJlYWRpbmcgZGF0YVxuICAgICAgICAgICAgICAgIGZyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZi5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGZyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XG5cbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5wdXNoKGRlZik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9LFxuXG4gICAgICAgIG51bWJlcjogZnVuY3Rpb24gKHZhbHVlLCBtZXNzYWdlcywgb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2tpcE9uRW1wdHkgJiYgcHViLmlzRW1wdHkodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiAhdmFsdWUubWF0Y2gob3B0aW9ucy5wYXR0ZXJuKSkge1xuICAgICAgICAgICAgICAgIHB1Yi5hZGRNZXNzYWdlKG1lc3NhZ2VzLCBvcHRpb25zLm1lc3NhZ2UsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLm1pbiAhPT0gdW5kZWZpbmVkICYmIHZhbHVlIDwgb3B0aW9ucy5taW4pIHtcbiAgICAgICAgICAgICAgICBwdWIuYWRkTWVzc2FnZShtZXNzYWdlcywgb3B0aW9ucy50b29TbWFsbCwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMubWF4ICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgPiBvcHRpb25zLm1heCkge1xuICAgICAgICAgICAgICAgIHB1Yi5hZGRNZXNzYWdlKG1lc3NhZ2VzLCBvcHRpb25zLnRvb0JpZywgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHJhbmdlOiBmdW5jdGlvbiAodmFsdWUsIG1lc3NhZ2VzLCBvcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5za2lwT25FbXB0eSAmJiBwdWIuaXNFbXB0eSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghb3B0aW9ucy5hbGxvd0FycmF5ICYmICQuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBwdWIuYWRkTWVzc2FnZShtZXNzYWdlcywgb3B0aW9ucy5tZXNzYWdlLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgaW5BcnJheSA9IHRydWU7XG5cbiAgICAgICAgICAgICQuZWFjaCgkLmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbdmFsdWVdLCBmdW5jdGlvbiAoaSwgdikge1xuICAgICAgICAgICAgICAgIGlmICgkLmluQXJyYXkodiwgb3B0aW9ucy5yYW5nZSkgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5BcnJheSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLm5vdCA9PT0gaW5BcnJheSkge1xuICAgICAgICAgICAgICAgIHB1Yi5hZGRNZXNzYWdlKG1lc3NhZ2VzLCBvcHRpb25zLm1lc3NhZ2UsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICByZWd1bGFyRXhwcmVzc2lvbjogZnVuY3Rpb24gKHZhbHVlLCBtZXNzYWdlcywgb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2tpcE9uRW1wdHkgJiYgcHViLmlzRW1wdHkodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMubm90ICYmICF2YWx1ZS5tYXRjaChvcHRpb25zLnBhdHRlcm4pIHx8IG9wdGlvbnMubm90ICYmIHZhbHVlLm1hdGNoKG9wdGlvbnMucGF0dGVybikpIHtcbiAgICAgICAgICAgICAgICBwdWIuYWRkTWVzc2FnZShtZXNzYWdlcywgb3B0aW9ucy5tZXNzYWdlLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZW1haWw6IGZ1bmN0aW9uICh2YWx1ZSwgbWVzc2FnZXMsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnNraXBPbkVtcHR5ICYmIHB1Yi5pc0VtcHR5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHZhbGlkID0gdHJ1ZTtcblxuXG4gICAgICAgICAgICB2YXIgcmVnZXhwID0gL14oKD86XCI/KFteXCJdKilcIj9cXHMpPykoPzpcXHMrKT8oPzooPD8pKCguKylAKFtePl0rKSkoPj8pKSQvLFxuICAgICAgICAgICAgICAgIG1hdGNoZXMgPSByZWdleHAuZXhlYyh2YWx1ZSk7XG5cbiAgICAgICAgICAgIGlmIChtYXRjaGVzID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5lbmFibGVJRE4pIHtcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlc1s1XSA9IHB1bnljb2RlLnRvQVNDSUkobWF0Y2hlc1s1XSk7XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZXNbNl0gPSBwdW55Y29kZS50b0FTQ0lJKG1hdGNoZXNbNl0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbWF0Y2hlc1sxXSArIG1hdGNoZXNbM10gKyBtYXRjaGVzWzVdICsgJ0AnICsgbWF0Y2hlc1s2XSArIG1hdGNoZXNbN107XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoZXNbNV0ubGVuZ3RoID4gNjQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKChtYXRjaGVzWzVdICsgJ0AnICsgbWF0Y2hlc1s2XSkubGVuZ3RoID4gMjU0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSB2YWx1ZS5tYXRjaChvcHRpb25zLnBhdHRlcm4pIHx8IChvcHRpb25zLmFsbG93TmFtZSAmJiB2YWx1ZS5tYXRjaChvcHRpb25zLmZ1bGxQYXR0ZXJuKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcHViLmFkZE1lc3NhZ2UobWVzc2FnZXMsIG9wdGlvbnMubWVzc2FnZSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHVybDogZnVuY3Rpb24gKHZhbHVlLCBtZXNzYWdlcywgb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2tpcE9uRW1wdHkgJiYgcHViLmlzRW1wdHkodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0U2NoZW1lICYmICF2YWx1ZS5tYXRjaCgvOlxcL1xcLy8pKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBvcHRpb25zLmRlZmF1bHRTY2hlbWUgKyAnOi8vJyArIHZhbHVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgdmFsaWQgPSB0cnVlO1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5lbmFibGVJRE4pIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVnZXhwID0gL14oW146XSspOlxcL1xcLyhbXlxcL10rKSguKikkLyxcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcyA9IHJlZ2V4cC5leGVjKHZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbWF0Y2hlc1sxXSArICc6Ly8nICsgcHVueWNvZGUudG9BU0NJSShtYXRjaGVzWzJdKSArIG1hdGNoZXNbM107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXZhbGlkIHx8ICF2YWx1ZS5tYXRjaChvcHRpb25zLnBhdHRlcm4pKSB7XG4gICAgICAgICAgICAgICAgcHViLmFkZE1lc3NhZ2UobWVzc2FnZXMsIG9wdGlvbnMubWVzc2FnZSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHRyaW06IGZ1bmN0aW9uICgkZm9ybSwgYXR0cmlidXRlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgJGlucHV0ID0gJGZvcm0uZmluZChhdHRyaWJ1dGUuaW5wdXQpO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gJGlucHV0LnZhbCgpO1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zLnNraXBPbkVtcHR5IHx8ICFwdWIuaXNFbXB0eSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9ICQudHJpbSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgJGlucHV0LnZhbCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY2FwdGNoYTogZnVuY3Rpb24gKHZhbHVlLCBtZXNzYWdlcywgb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2tpcE9uRW1wdHkgJiYgcHViLmlzRW1wdHkodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDQVBUQ0hBIG1heSBiZSB1cGRhdGVkIHZpYSBBSkFYIGFuZCB0aGUgdXBkYXRlZCBoYXNoIGlzIHN0b3JlZCBpbiBib2R5IGRhdGFcbiAgICAgICAgICAgIHZhciBoYXNoID0gJCgnYm9keScpLmRhdGEob3B0aW9ucy5oYXNoS2V5KTtcbiAgICAgICAgICAgIGlmIChoYXNoID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBoYXNoID0gb3B0aW9ucy5oYXNoO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBoYXNoID0gaGFzaFtvcHRpb25zLmNhc2VTZW5zaXRpdmUgPyAwIDogMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdiA9IG9wdGlvbnMuY2FzZVNlbnNpdGl2ZSA/IHZhbHVlIDogdmFsdWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSB2Lmxlbmd0aCAtIDEsIGggPSAwOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgICAgIGggKz0gdi5jaGFyQ29kZUF0KGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGggIT0gaGFzaCkge1xuICAgICAgICAgICAgICAgIHB1Yi5hZGRNZXNzYWdlKG1lc3NhZ2VzLCBvcHRpb25zLm1lc3NhZ2UsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBjb21wYXJlOiBmdW5jdGlvbiAodmFsdWUsIG1lc3NhZ2VzLCBvcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5za2lwT25FbXB0eSAmJiBwdWIuaXNFbXB0eSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBjb21wYXJlVmFsdWUsIHZhbGlkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmNvbXBhcmVBdHRyaWJ1dGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbXBhcmVWYWx1ZSA9IG9wdGlvbnMuY29tcGFyZVZhbHVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb21wYXJlVmFsdWUgPSAkKCcjJyArIG9wdGlvbnMuY29tcGFyZUF0dHJpYnV0ZSkudmFsKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnR5cGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICBjb21wYXJlVmFsdWUgPSBwYXJzZUZsb2F0KGNvbXBhcmVWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2l0Y2ggKG9wdGlvbnMub3BlcmF0b3IpIHtcbiAgICAgICAgICAgICAgICBjYXNlICc9PSc6XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkID0gdmFsdWUgPT0gY29tcGFyZVZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICc9PT0nOlxuICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IHZhbHVlID09PSBjb21wYXJlVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJyE9JzpcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSB2YWx1ZSAhPSBjb21wYXJlVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJyE9PSc6XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkID0gdmFsdWUgIT09IGNvbXBhcmVWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnPic6XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkID0gdmFsdWUgPiBjb21wYXJlVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJz49JzpcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSB2YWx1ZSA+PSBjb21wYXJlVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJzwnOlxuICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IHZhbHVlIDwgY29tcGFyZVZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICc8PSc6XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkID0gdmFsdWUgPD0gY29tcGFyZVZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF2YWxpZCkge1xuICAgICAgICAgICAgICAgIHB1Yi5hZGRNZXNzYWdlKG1lc3NhZ2VzLCBvcHRpb25zLm1lc3NhZ2UsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBpcDogZnVuY3Rpb24gKHZhbHVlLCBtZXNzYWdlcywgb3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIGdldElwVmVyc2lvbiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS5pbmRleE9mKCc6JykgPT09IC0xID8gNCA6IDY7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgbmVnYXRpb24gPSBudWxsLCBjaWRyID0gbnVsbDtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2tpcE9uRW1wdHkgJiYgcHViLmlzRW1wdHkodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IG5ldyBSZWdFeHAob3B0aW9ucy5pcFBhcnNlUGF0dGVybikuZXhlYyh2YWx1ZSk7XG4gICAgICAgICAgICBpZiAobWF0Y2hlcykge1xuICAgICAgICAgICAgICAgIG5lZ2F0aW9uID0gbWF0Y2hlc1sxXSB8fCBudWxsO1xuICAgICAgICAgICAgICAgIHZhbHVlID0gbWF0Y2hlc1syXTtcbiAgICAgICAgICAgICAgICBjaWRyID0gbWF0Y2hlc1s0XSB8fCBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5zdWJuZXQgPT09IHRydWUgJiYgY2lkciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHB1Yi5hZGRNZXNzYWdlKG1lc3NhZ2VzLCBvcHRpb25zLm1lc3NhZ2VzLm5vU3VibmV0LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3VibmV0ID09PSBmYWxzZSAmJiBjaWRyICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcHViLmFkZE1lc3NhZ2UobWVzc2FnZXMsIG9wdGlvbnMubWVzc2FnZXMuaGFzU3VibmV0LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMubmVnYXRpb24gPT09IGZhbHNlICYmIG5lZ2F0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcHViLmFkZE1lc3NhZ2UobWVzc2FnZXMsIG9wdGlvbnMubWVzc2FnZXMubWVzc2FnZSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGdldElwVmVyc2lvbih2YWx1ZSkgPT0gNikge1xuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucy5pcHY2KSB7XG4gICAgICAgICAgICAgICAgICAgIHB1Yi5hZGRNZXNzYWdlKG1lc3NhZ2VzLCBvcHRpb25zLm1lc3NhZ2VzLmlwdjZOb3RBbGxvd2VkLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghKG5ldyBSZWdFeHAob3B0aW9ucy5pcHY2UGF0dGVybikpLnRlc3QodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHB1Yi5hZGRNZXNzYWdlKG1lc3NhZ2VzLCBvcHRpb25zLm1lc3NhZ2VzLm1lc3NhZ2UsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucy5pcHY0KSB7XG4gICAgICAgICAgICAgICAgICAgIHB1Yi5hZGRNZXNzYWdlKG1lc3NhZ2VzLCBvcHRpb25zLm1lc3NhZ2VzLmlwdjROb3RBbGxvd2VkLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghKG5ldyBSZWdFeHAob3B0aW9ucy5pcHY0UGF0dGVybikpLnRlc3QodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHB1Yi5hZGRNZXNzYWdlKG1lc3NhZ2VzLCBvcHRpb25zLm1lc3NhZ2VzLm1lc3NhZ2UsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gZ2V0VXBsb2FkZWRGaWxlcyhhdHRyaWJ1dGUsIG1lc3NhZ2VzLCBvcHRpb25zKSB7XG4gICAgICAgIC8vIFNraXAgdmFsaWRhdGlvbiBpZiBGaWxlIEFQSSBpcyBub3QgYXZhaWxhYmxlXG4gICAgICAgIGlmICh0eXBlb2YgRmlsZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGZpbGVzID0gJChhdHRyaWJ1dGUuaW5wdXQpLmdldCgwKS5maWxlcztcbiAgICAgICAgaWYgKCFmaWxlcykge1xuICAgICAgICAgICAgbWVzc2FnZXMucHVzaChvcHRpb25zLm1lc3NhZ2UpO1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKCFvcHRpb25zLnNraXBPbkVtcHR5KSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZXMucHVzaChvcHRpb25zLnVwbG9hZFJlcXVpcmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLm1heEZpbGVzICYmIG9wdGlvbnMubWF4RmlsZXMgPCBmaWxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzLnB1c2gob3B0aW9ucy50b29NYW55KTtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmaWxlcztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB2YWxpZGF0ZUZpbGUoZmlsZSwgbWVzc2FnZXMsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMuZXh0ZW5zaW9ucyAmJiBvcHRpb25zLmV4dGVuc2lvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIGluZGV4LCBleHQ7XG5cbiAgICAgICAgICAgIGluZGV4ID0gZmlsZS5uYW1lLmxhc3RJbmRleE9mKCcuJyk7XG5cbiAgICAgICAgICAgIGlmICghfmluZGV4KSB7XG4gICAgICAgICAgICAgICAgZXh0ID0gJyc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGV4dCA9IGZpbGUubmFtZS5zdWJzdHIoaW5kZXggKyAxLCBmaWxlLm5hbWUubGVuZ3RoKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIX5vcHRpb25zLmV4dGVuc2lvbnMuaW5kZXhPZihleHQpKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZXMucHVzaChvcHRpb25zLndyb25nRXh0ZW5zaW9uLnJlcGxhY2UoL1xce2ZpbGVcXH0vZywgZmlsZS5uYW1lKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy5taW1lVHlwZXMgJiYgb3B0aW9ucy5taW1lVHlwZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaWYgKCF+b3B0aW9ucy5taW1lVHlwZXMuaW5kZXhPZihmaWxlLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZXMucHVzaChvcHRpb25zLndyb25nTWltZVR5cGUucmVwbGFjZSgvXFx7ZmlsZVxcfS9nLCBmaWxlLm5hbWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLm1heFNpemUgJiYgb3B0aW9ucy5tYXhTaXplIDwgZmlsZS5zaXplKSB7XG4gICAgICAgICAgICBtZXNzYWdlcy5wdXNoKG9wdGlvbnMudG9vQmlnLnJlcGxhY2UoL1xce2ZpbGVcXH0vZywgZmlsZS5uYW1lKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy5taW5TaXplICYmIG9wdGlvbnMubWluU2l6ZSA+IGZpbGUuc2l6ZSkge1xuICAgICAgICAgICAgbWVzc2FnZXMucHVzaChvcHRpb25zLnRvb1NtYWxsLnJlcGxhY2UoL1xce2ZpbGVcXH0vZywgZmlsZS5uYW1lKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcHViO1xufSkoalF1ZXJ5KTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi4vYmFja2VuZC92ZW5kb3IveWlpc29mdC95aWkyL2Fzc2V0cy95aWkudmFsaWRhdGlvbi5qc1xuICoqIG1vZHVsZSBpZCA9IDIxOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },

/***/ 220:
/***/ function(module, exports) {

	eval("/**\n * Yii GridView widget.\n *\n * This is the JavaScript widget used by the yii\\grid\\GridView widget.\n *\n * @link http://www.yiiframework.com/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http://www.yiiframework.com/license/\n * @author Qiang Xue <qiang.xue@gmail.com>\n * @since 2.0\n */\n(function ($) {\n    $.fn.yiiGridView = function (method) {\n        if (methods[method]) {\n            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));\n        } else if (typeof method === 'object' || !method) {\n            return methods.init.apply(this, arguments);\n        } else {\n            $.error('Method ' + method + ' does not exist on jQuery.yiiGridView');\n            return false;\n        }\n    };\n\n    var defaults = {\n        filterUrl: undefined,\n        filterSelector: undefined\n    };\n\n    var gridData = {};\n\n    var gridEvents = {\n        /**\n         * beforeFilter event is triggered before filtering the grid.\n         * The signature of the event handler should be:\n         *     function (event)\n         * where\n         *  - event: an Event object.\n         *\n         * If the handler returns a boolean false, it will stop filter form submission after this event. As\n         * a result, afterFilter event will not be triggered.\n         */\n        beforeFilter: 'beforeFilter',\n        /**\n         * afterFilter event is triggered after filtering the grid and filtered results are fetched.\n         * The signature of the event handler should be:\n         *     function (event)\n         * where\n         *  - event: an Event object.\n         */\n        afterFilter: 'afterFilter'\n    };\n\n    var methods = {\n        init: function (options) {\n            return this.each(function () {\n                var $e = $(this);\n                var settings = $.extend({}, defaults, options || {});\n                gridData[$e.attr('id')] = {settings: settings};\n\n                var enterPressed = false;\n                $(document).off('change.yiiGridView keydown.yiiGridView', settings.filterSelector)\n                    .on('change.yiiGridView keydown.yiiGridView', settings.filterSelector, function (event) {\n                        if (event.type === 'keydown') {\n                            if (event.keyCode !== 13) {\n                                return; // only react to enter key\n                            } else {\n                                enterPressed = true;\n                            }\n                        } else {\n                            // prevent processing for both keydown and change events\n                            if (enterPressed) {\n                                enterPressed = false;\n                                return;\n                            }\n                        }\n\n                        methods.applyFilter.apply($e);\n\n                        return false;\n                    });\n            });\n        },\n\n        applyFilter: function () {\n            var $grid = $(this), event;\n            var settings = gridData[$grid.attr('id')].settings;\n            var data = {};\n            $.each($(settings.filterSelector).serializeArray(), function () {\n                if (!(this.name in data)) {\n                    data[this.name] = [];\n                }\n                data[this.name].push(this.value);\n            });\n\n            var namesInFilter = Object.keys(data);\n\n            $.each(yii.getQueryParams(settings.filterUrl), function (name, value) {\n                if (namesInFilter.indexOf(name) === -1 && namesInFilter.indexOf(name.replace(/\\[\\]$/, '')) === -1) {\n                    if (!$.isArray(value)) {\n                        value = [value];\n                    }\n                    if (!(name in data)) {\n                        data[name] = value;\n                    } else {\n                        $.each(value, function (i, val) {\n                            if ($.inArray(val, data[name])) {\n                                data[name].push(val);\n                            }\n                        });\n                    }\n                }\n            });\n\n            var pos = settings.filterUrl.indexOf('?');\n            var url = pos < 0 ? settings.filterUrl : settings.filterUrl.substring(0, pos);\n\n            $grid.find('form.gridview-filter-form').remove();\n            var $form = $('<form/>', {\n                action: url,\n                method: 'get',\n                class: 'gridview-filter-form',\n                style: 'display:none',\n                'data-pjax': ''\n            }).appendTo($grid);\n            $.each(data, function (name, values) {\n                $.each(values, function (index, value) {\n                    $form.append($('<input/>').attr({type: 'hidden', name: name, value: value}));\n                });\n            });\n\n            event = $.Event(gridEvents.beforeFilter);\n            $grid.trigger(event);\n            if (event.result === false) {\n                return;\n            }\n\n            $form.submit();\n\n            $grid.trigger(gridEvents.afterFilter);\n        },\n\n        setSelectionColumn: function (options) {\n            var $grid = $(this);\n            var id = $(this).attr('id');\n            gridData[id].selectionColumn = options.name;\n            if (!options.multiple) {\n                return;\n            }\n            var checkAll = \"#\" + id + \" input[name='\" + options.checkAll + \"']\";\n            var inputs = \"#\" + id + \" input[name='\" + options.name + \"']\";\n            $(document).off('click.yiiGridView', checkAll).on('click.yiiGridView', checkAll, function () {\n                $grid.find(\"input[name='\" + options.name + \"']:enabled\").prop('checked', this.checked);\n            });\n            $(document).off('click.yiiGridView', inputs + \":enabled\").on('click.yiiGridView', inputs + \":enabled\", function () {\n                var all = $grid.find(\"input[name='\" + options.name + \"']\").length == $grid.find(\"input[name='\" + options.name + \"']:checked\").length;\n                $grid.find(\"input[name='\" + options.checkAll + \"']\").prop('checked', all);\n            });\n        },\n\n        getSelectedRows: function () {\n            var $grid = $(this);\n            var data = gridData[$grid.attr('id')];\n            var keys = [];\n            if (data.selectionColumn) {\n                $grid.find(\"input[name='\" + data.selectionColumn + \"']:checked\").each(function () {\n                    keys.push($(this).parent().closest('tr').data('key'));\n                });\n            }\n            return keys;\n        },\n\n        destroy: function () {\n            return this.each(function () {\n                $(window).unbind('.yiiGridView');\n                $(this).removeData('yiiGridView');\n            });\n        },\n\n        data: function () {\n            var id = $(this).attr('id');\n            return gridData[id];\n        }\n    };\n})(window.jQuery);\n//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vYmFja2VuZC92ZW5kb3IveWlpc29mdC95aWkyL2Fzc2V0cy95aWkuZ3JpZFZpZXcuanM/MjI4MiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHlCQUF5QjtBQUNuRSwyQ0FBMkM7O0FBRTNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkMsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EscUJBQXFCO0FBQ3JCLGFBQWE7QUFDYixTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EscURBQXFELHlDQUF5QztBQUM5RixpQkFBaUI7QUFDakIsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJmaWxlIjoiMjIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBZaWkgR3JpZFZpZXcgd2lkZ2V0LlxuICpcbiAqIFRoaXMgaXMgdGhlIEphdmFTY3JpcHQgd2lkZ2V0IHVzZWQgYnkgdGhlIHlpaVxcZ3JpZFxcR3JpZFZpZXcgd2lkZ2V0LlxuICpcbiAqIEBsaW5rIGh0dHA6Ly93d3cueWlpZnJhbWV3b3JrLmNvbS9cbiAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IChjKSAyMDA4IFlpaSBTb2Z0d2FyZSBMTENcbiAqIEBsaWNlbnNlIGh0dHA6Ly93d3cueWlpZnJhbWV3b3JrLmNvbS9saWNlbnNlL1xuICogQGF1dGhvciBRaWFuZyBYdWUgPHFpYW5nLnh1ZUBnbWFpbC5jb20+XG4gKiBAc2luY2UgMi4wXG4gKi9cbihmdW5jdGlvbiAoJCkge1xuICAgICQuZm4ueWlpR3JpZFZpZXcgPSBmdW5jdGlvbiAobWV0aG9kKSB7XG4gICAgICAgIGlmIChtZXRob2RzW21ldGhvZF0pIHtcbiAgICAgICAgICAgIHJldHVybiBtZXRob2RzW21ldGhvZF0uYXBwbHkodGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG1ldGhvZCA9PT0gJ29iamVjdCcgfHwgIW1ldGhvZCkge1xuICAgICAgICAgICAgcmV0dXJuIG1ldGhvZHMuaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJC5lcnJvcignTWV0aG9kICcgKyBtZXRob2QgKyAnIGRvZXMgbm90IGV4aXN0IG9uIGpRdWVyeS55aWlHcmlkVmlldycpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgICAgZmlsdGVyVXJsOiB1bmRlZmluZWQsXG4gICAgICAgIGZpbHRlclNlbGVjdG9yOiB1bmRlZmluZWRcbiAgICB9O1xuXG4gICAgdmFyIGdyaWREYXRhID0ge307XG5cbiAgICB2YXIgZ3JpZEV2ZW50cyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGJlZm9yZUZpbHRlciBldmVudCBpcyB0cmlnZ2VyZWQgYmVmb3JlIGZpbHRlcmluZyB0aGUgZ3JpZC5cbiAgICAgICAgICogVGhlIHNpZ25hdHVyZSBvZiB0aGUgZXZlbnQgaGFuZGxlciBzaG91bGQgYmU6XG4gICAgICAgICAqICAgICBmdW5jdGlvbiAoZXZlbnQpXG4gICAgICAgICAqIHdoZXJlXG4gICAgICAgICAqICAtIGV2ZW50OiBhbiBFdmVudCBvYmplY3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIElmIHRoZSBoYW5kbGVyIHJldHVybnMgYSBib29sZWFuIGZhbHNlLCBpdCB3aWxsIHN0b3AgZmlsdGVyIGZvcm0gc3VibWlzc2lvbiBhZnRlciB0aGlzIGV2ZW50LiBBc1xuICAgICAgICAgKiBhIHJlc3VsdCwgYWZ0ZXJGaWx0ZXIgZXZlbnQgd2lsbCBub3QgYmUgdHJpZ2dlcmVkLlxuICAgICAgICAgKi9cbiAgICAgICAgYmVmb3JlRmlsdGVyOiAnYmVmb3JlRmlsdGVyJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFmdGVyRmlsdGVyIGV2ZW50IGlzIHRyaWdnZXJlZCBhZnRlciBmaWx0ZXJpbmcgdGhlIGdyaWQgYW5kIGZpbHRlcmVkIHJlc3VsdHMgYXJlIGZldGNoZWQuXG4gICAgICAgICAqIFRoZSBzaWduYXR1cmUgb2YgdGhlIGV2ZW50IGhhbmRsZXIgc2hvdWxkIGJlOlxuICAgICAgICAgKiAgICAgZnVuY3Rpb24gKGV2ZW50KVxuICAgICAgICAgKiB3aGVyZVxuICAgICAgICAgKiAgLSBldmVudDogYW4gRXZlbnQgb2JqZWN0LlxuICAgICAgICAgKi9cbiAgICAgICAgYWZ0ZXJGaWx0ZXI6ICdhZnRlckZpbHRlcidcbiAgICB9O1xuXG4gICAgdmFyIG1ldGhvZHMgPSB7XG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgJGUgPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgIHZhciBzZXR0aW5ncyA9ICQuZXh0ZW5kKHt9LCBkZWZhdWx0cywgb3B0aW9ucyB8fCB7fSk7XG4gICAgICAgICAgICAgICAgZ3JpZERhdGFbJGUuYXR0cignaWQnKV0gPSB7c2V0dGluZ3M6IHNldHRpbmdzfTtcblxuICAgICAgICAgICAgICAgIHZhciBlbnRlclByZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vZmYoJ2NoYW5nZS55aWlHcmlkVmlldyBrZXlkb3duLnlpaUdyaWRWaWV3Jywgc2V0dGluZ3MuZmlsdGVyU2VsZWN0b3IpXG4gICAgICAgICAgICAgICAgICAgIC5vbignY2hhbmdlLnlpaUdyaWRWaWV3IGtleWRvd24ueWlpR3JpZFZpZXcnLCBzZXR0aW5ncy5maWx0ZXJTZWxlY3RvciwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ2tleWRvd24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgIT09IDEzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gb25seSByZWFjdCB0byBlbnRlciBrZXlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRlclByZXNzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJldmVudCBwcm9jZXNzaW5nIGZvciBib3RoIGtleWRvd24gYW5kIGNoYW5nZSBldmVudHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW50ZXJQcmVzc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudGVyUHJlc3NlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RzLmFwcGx5RmlsdGVyLmFwcGx5KCRlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGFwcGx5RmlsdGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgJGdyaWQgPSAkKHRoaXMpLCBldmVudDtcbiAgICAgICAgICAgIHZhciBzZXR0aW5ncyA9IGdyaWREYXRhWyRncmlkLmF0dHIoJ2lkJyldLnNldHRpbmdzO1xuICAgICAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgICAgICQuZWFjaCgkKHNldHRpbmdzLmZpbHRlclNlbGVjdG9yKS5zZXJpYWxpemVBcnJheSgpLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEodGhpcy5uYW1lIGluIGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFbdGhpcy5uYW1lXSA9IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkYXRhW3RoaXMubmFtZV0ucHVzaCh0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgbmFtZXNJbkZpbHRlciA9IE9iamVjdC5rZXlzKGRhdGEpO1xuXG4gICAgICAgICAgICAkLmVhY2goeWlpLmdldFF1ZXJ5UGFyYW1zKHNldHRpbmdzLmZpbHRlclVybCksIGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChuYW1lc0luRmlsdGVyLmluZGV4T2YobmFtZSkgPT09IC0xICYmIG5hbWVzSW5GaWx0ZXIuaW5kZXhPZihuYW1lLnJlcGxhY2UoL1xcW1xcXSQvLCAnJykpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoISQuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gW3ZhbHVlXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIShuYW1lIGluIGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhW25hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2godmFsdWUsIGZ1bmN0aW9uIChpLCB2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJC5pbkFycmF5KHZhbCwgZGF0YVtuYW1lXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtuYW1lXS5wdXNoKHZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIHBvcyA9IHNldHRpbmdzLmZpbHRlclVybC5pbmRleE9mKCc/Jyk7XG4gICAgICAgICAgICB2YXIgdXJsID0gcG9zIDwgMCA/IHNldHRpbmdzLmZpbHRlclVybCA6IHNldHRpbmdzLmZpbHRlclVybC5zdWJzdHJpbmcoMCwgcG9zKTtcblxuICAgICAgICAgICAgJGdyaWQuZmluZCgnZm9ybS5ncmlkdmlldy1maWx0ZXItZm9ybScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgdmFyICRmb3JtID0gJCgnPGZvcm0vPicsIHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IHVybCxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdnZXQnLFxuICAgICAgICAgICAgICAgIGNsYXNzOiAnZ3JpZHZpZXctZmlsdGVyLWZvcm0nLFxuICAgICAgICAgICAgICAgIHN0eWxlOiAnZGlzcGxheTpub25lJyxcbiAgICAgICAgICAgICAgICAnZGF0YS1wamF4JzogJydcbiAgICAgICAgICAgIH0pLmFwcGVuZFRvKCRncmlkKTtcbiAgICAgICAgICAgICQuZWFjaChkYXRhLCBmdW5jdGlvbiAobmFtZSwgdmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgJC5lYWNoKHZhbHVlcywgZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAkZm9ybS5hcHBlbmQoJCgnPGlucHV0Lz4nKS5hdHRyKHt0eXBlOiAnaGlkZGVuJywgbmFtZTogbmFtZSwgdmFsdWU6IHZhbHVlfSkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGV2ZW50ID0gJC5FdmVudChncmlkRXZlbnRzLmJlZm9yZUZpbHRlcik7XG4gICAgICAgICAgICAkZ3JpZC50cmlnZ2VyKGV2ZW50KTtcbiAgICAgICAgICAgIGlmIChldmVudC5yZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkZm9ybS5zdWJtaXQoKTtcblxuICAgICAgICAgICAgJGdyaWQudHJpZ2dlcihncmlkRXZlbnRzLmFmdGVyRmlsdGVyKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXRTZWxlY3Rpb25Db2x1bW46IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgJGdyaWQgPSAkKHRoaXMpO1xuICAgICAgICAgICAgdmFyIGlkID0gJCh0aGlzKS5hdHRyKCdpZCcpO1xuICAgICAgICAgICAgZ3JpZERhdGFbaWRdLnNlbGVjdGlvbkNvbHVtbiA9IG9wdGlvbnMubmFtZTtcbiAgICAgICAgICAgIGlmICghb3B0aW9ucy5tdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjaGVja0FsbCA9IFwiI1wiICsgaWQgKyBcIiBpbnB1dFtuYW1lPSdcIiArIG9wdGlvbnMuY2hlY2tBbGwgKyBcIiddXCI7XG4gICAgICAgICAgICB2YXIgaW5wdXRzID0gXCIjXCIgKyBpZCArIFwiIGlucHV0W25hbWU9J1wiICsgb3B0aW9ucy5uYW1lICsgXCInXVwiO1xuICAgICAgICAgICAgJChkb2N1bWVudCkub2ZmKCdjbGljay55aWlHcmlkVmlldycsIGNoZWNrQWxsKS5vbignY2xpY2sueWlpR3JpZFZpZXcnLCBjaGVja0FsbCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICRncmlkLmZpbmQoXCJpbnB1dFtuYW1lPSdcIiArIG9wdGlvbnMubmFtZSArIFwiJ106ZW5hYmxlZFwiKS5wcm9wKCdjaGVja2VkJywgdGhpcy5jaGVja2VkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJChkb2N1bWVudCkub2ZmKCdjbGljay55aWlHcmlkVmlldycsIGlucHV0cyArIFwiOmVuYWJsZWRcIikub24oJ2NsaWNrLnlpaUdyaWRWaWV3JywgaW5wdXRzICsgXCI6ZW5hYmxlZFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFsbCA9ICRncmlkLmZpbmQoXCJpbnB1dFtuYW1lPSdcIiArIG9wdGlvbnMubmFtZSArIFwiJ11cIikubGVuZ3RoID09ICRncmlkLmZpbmQoXCJpbnB1dFtuYW1lPSdcIiArIG9wdGlvbnMubmFtZSArIFwiJ106Y2hlY2tlZFwiKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgJGdyaWQuZmluZChcImlucHV0W25hbWU9J1wiICsgb3B0aW9ucy5jaGVja0FsbCArIFwiJ11cIikucHJvcCgnY2hlY2tlZCcsIGFsbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRTZWxlY3RlZFJvd3M6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciAkZ3JpZCA9ICQodGhpcyk7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IGdyaWREYXRhWyRncmlkLmF0dHIoJ2lkJyldO1xuICAgICAgICAgICAgdmFyIGtleXMgPSBbXTtcbiAgICAgICAgICAgIGlmIChkYXRhLnNlbGVjdGlvbkNvbHVtbikge1xuICAgICAgICAgICAgICAgICRncmlkLmZpbmQoXCJpbnB1dFtuYW1lPSdcIiArIGRhdGEuc2VsZWN0aW9uQ29sdW1uICsgXCInXTpjaGVja2VkXCIpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBrZXlzLnB1c2goJCh0aGlzKS5wYXJlbnQoKS5jbG9zZXN0KCd0cicpLmRhdGEoJ2tleScpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBrZXlzO1xuICAgICAgICB9LFxuXG4gICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQod2luZG93KS51bmJpbmQoJy55aWlHcmlkVmlldycpO1xuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlRGF0YSgneWlpR3JpZFZpZXcnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGRhdGE6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpZCA9ICQodGhpcykuYXR0cignaWQnKTtcbiAgICAgICAgICAgIHJldHVybiBncmlkRGF0YVtpZF07XG4gICAgICAgIH1cbiAgICB9O1xufSkod2luZG93LmpRdWVyeSk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4uL2JhY2tlbmQvdmVuZG9yL3lpaXNvZnQveWlpMi9hc3NldHMveWlpLmdyaWRWaWV3LmpzXG4gKiogbW9kdWxlIGlkID0gMjIwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9");

/***/ },

/***/ 221:
/***/ function(module, exports) {

	eval("/**\n * Yii form widget.\n *\n * This is the JavaScript widget used by the yii\\widgets\\ActiveForm widget.\n *\n * @link http://www.yiiframework.com/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http://www.yiiframework.com/license/\n * @author Qiang Xue <qiang.xue@gmail.com>\n * @since 2.0\n */\n(function ($) {\n\n    $.fn.yiiActiveForm = function (method) {\n        if (methods[method]) {\n            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));\n        } else if (typeof method === 'object' || !method) {\n            return methods.init.apply(this, arguments);\n        } else {\n            $.error('Method ' + method + ' does not exist on jQuery.yiiActiveForm');\n            return false;\n        }\n    };\n\n    var events = {\n        /**\n         * beforeValidate event is triggered before validating the whole form.\n         * The signature of the event handler should be:\n         *     function (event, messages, deferreds)\n         * where\n         *  - event: an Event object.\n         *  - messages: an associative array with keys being attribute IDs and values being error message arrays\n         *    for the corresponding attributes.\n         *  - deferreds: an array of Deferred objects. You can use deferreds.add(callback) to add a new deferred validation.\n         *\n         * If the handler returns a boolean false, it will stop further form validation after this event. And as\n         * a result, afterValidate event will not be triggered.\n         */\n        beforeValidate: 'beforeValidate',\n        /**\n         * afterValidate event is triggered after validating the whole form.\n         * The signature of the event handler should be:\n         *     function (event, messages, errorAttributes)\n         * where\n         *  - event: an Event object.\n         *  - messages: an associative array with keys being attribute IDs and values being error message arrays\n         *    for the corresponding attributes.\n         *  - errorAttributes: an array of attributes that have validation errors. Please refer to attributeDefaults for the structure of this parameter.\n         */\n        afterValidate: 'afterValidate',\n        /**\n         * beforeValidateAttribute event is triggered before validating an attribute.\n         * The signature of the event handler should be:\n         *     function (event, attribute, messages, deferreds)\n         * where\n         *  - event: an Event object.\n         *  - attribute: the attribute to be validated. Please refer to attributeDefaults for the structure of this parameter.\n         *  - messages: an array to which you can add validation error messages for the specified attribute.\n         *  - deferreds: an array of Deferred objects. You can use deferreds.add(callback) to add a new deferred validation.\n         *\n         * If the handler returns a boolean false, it will stop further validation of the specified attribute.\n         * And as a result, afterValidateAttribute event will not be triggered.\n         */\n        beforeValidateAttribute: 'beforeValidateAttribute',\n        /**\n         * afterValidateAttribute event is triggered after validating the whole form and each attribute.\n         * The signature of the event handler should be:\n         *     function (event, attribute, messages)\n         * where\n         *  - event: an Event object.\n         *  - attribute: the attribute being validated. Please refer to attributeDefaults for the structure of this parameter.\n         *  - messages: an array to which you can add additional validation error messages for the specified attribute.\n         */\n        afterValidateAttribute: 'afterValidateAttribute',\n        /**\n         * beforeSubmit event is triggered before submitting the form after all validations have passed.\n         * The signature of the event handler should be:\n         *     function (event)\n         * where event is an Event object.\n         *\n         * If the handler returns a boolean false, it will stop form submission.\n         */\n        beforeSubmit: 'beforeSubmit',\n        /**\n         * ajaxBeforeSend event is triggered before sending an AJAX request for AJAX-based validation.\n         * The signature of the event handler should be:\n         *     function (event, jqXHR, settings)\n         * where\n         *  - event: an Event object.\n         *  - jqXHR: a jqXHR object\n         *  - settings: the settings for the AJAX request\n         */\n        ajaxBeforeSend: 'ajaxBeforeSend',\n        /**\n         * ajaxComplete event is triggered after completing an AJAX request for AJAX-based validation.\n         * The signature of the event handler should be:\n         *     function (event, jqXHR, textStatus)\n         * where\n         *  - event: an Event object.\n         *  - jqXHR: a jqXHR object\n         *  - textStatus: the status of the request (\"success\", \"notmodified\", \"error\", \"timeout\", \"abort\", or \"parsererror\").\n         */\n        ajaxComplete: 'ajaxComplete'\n    };\n\n    // NOTE: If you change any of these defaults, make sure you update yii\\widgets\\ActiveForm::getClientOptions() as well\n    var defaults = {\n        // whether to encode the error summary\n        encodeErrorSummary: true,\n        // the jQuery selector for the error summary\n        errorSummary: '.error-summary',\n        // whether to perform validation before submitting the form.\n        validateOnSubmit: true,\n        // the container CSS class representing the corresponding attribute has validation error\n        errorCssClass: 'has-error',\n        // the container CSS class representing the corresponding attribute passes validation\n        successCssClass: 'has-success',\n        // the container CSS class representing the corresponding attribute is being validated\n        validatingCssClass: 'validating',\n        // the GET parameter name indicating an AJAX-based validation\n        ajaxParam: 'ajax',\n        // the type of data that you're expecting back from the server\n        ajaxDataType: 'json',\n        // the URL for performing AJAX-based validation. If not set, it will use the the form's action\n        validationUrl: undefined,\n        // whether to scroll to first visible error after validation.\n        scrollToError: true\n    };\n\n    // NOTE: If you change any of these defaults, make sure you update yii\\widgets\\ActiveField::getClientOptions() as well\n    var attributeDefaults = {\n        // a unique ID identifying an attribute (e.g. \"loginform-username\") in a form\n        id: undefined,\n        // attribute name or expression (e.g. \"[0]content\" for tabular input)\n        name: undefined,\n        // the jQuery selector of the container of the input field\n        container: undefined,\n        // the jQuery selector of the input field under the context of the form\n        input: undefined,\n        // the jQuery selector of the error tag under the context of the container\n        error: '.help-block',\n        // whether to encode the error\n        encodeError: true,\n        // whether to perform validation when a change is detected on the input\n        validateOnChange: true,\n        // whether to perform validation when the input loses focus\n        validateOnBlur: true,\n        // whether to perform validation when the user is typing.\n        validateOnType: false,\n        // number of milliseconds that the validation should be delayed when a user is typing in the input field.\n        validationDelay: 500,\n        // whether to enable AJAX-based validation.\n        enableAjaxValidation: false,\n        // function (attribute, value, messages, deferred, $form), the client-side validation function.\n        validate: undefined,\n        // status of the input field, 0: empty, not entered before, 1: validated, 2: pending validation, 3: validating\n        status: 0,\n        // whether the validation is cancelled by beforeValidateAttribute event handler\n        cancelled: false,\n        // the value of the input\n        value: undefined\n    };\n\n\n    var submitDefer;\n\n    var setSubmitFinalizeDefer = function($form) {\n        submitDefer = $.Deferred();\n        $form.data('yiiSubmitFinalizePromise', submitDefer.promise());\n    };\n\n    // finalize yii.js $form.submit\n    var submitFinalize = function($form) {\n        if(submitDefer) {\n            submitDefer.resolve();\n            submitDefer = undefined;\n            $form.removeData('yiiSubmitFinalizePromise');\n        }\n    };\n\n\n    var methods = {\n        init: function (attributes, options) {\n            return this.each(function () {\n                var $form = $(this);\n                if ($form.data('yiiActiveForm')) {\n                    return;\n                }\n\n                var settings = $.extend({}, defaults, options || {});\n                if (settings.validationUrl === undefined) {\n                    settings.validationUrl = $form.attr('action');\n                }\n\n                $.each(attributes, function (i) {\n                    attributes[i] = $.extend({value: getValue($form, this)}, attributeDefaults, this);\n                    watchAttribute($form, attributes[i]);\n                });\n\n                $form.data('yiiActiveForm', {\n                    settings: settings,\n                    attributes: attributes,\n                    submitting: false,\n                    validated: false\n                });\n\n                /**\n                 * Clean up error status when the form is reset.\n                 * Note that $form.on('reset', ...) does work because the \"reset\" event does not bubble on IE.\n                 */\n                $form.bind('reset.yiiActiveForm', methods.resetForm);\n\n                if (settings.validateOnSubmit) {\n                    $form.on('mouseup.yiiActiveForm keyup.yiiActiveForm', ':submit', function () {\n                        $form.data('yiiActiveForm').submitObject = $(this);\n                    });\n                    $form.on('submit.yiiActiveForm', methods.submitForm);\n                }\n            });\n        },\n\n        // add a new attribute to the form dynamically.\n        // please refer to attributeDefaults for the structure of attribute\n        add: function (attribute) {\n            var $form = $(this);\n            attribute = $.extend({value: getValue($form, attribute)}, attributeDefaults, attribute);\n            $form.data('yiiActiveForm').attributes.push(attribute);\n            watchAttribute($form, attribute);\n        },\n\n        // remove the attribute with the specified ID from the form\n        remove: function (id) {\n            var $form = $(this),\n                attributes = $form.data('yiiActiveForm').attributes,\n                index = -1,\n                attribute = undefined;\n            $.each(attributes, function (i) {\n                if (attributes[i]['id'] == id) {\n                    index = i;\n                    attribute = attributes[i];\n                    return false;\n                }\n            });\n            if (index >= 0) {\n                attributes.splice(index, 1);\n                unwatchAttribute($form, attribute);\n            }\n            return attribute;\n        },\n\n        // manually trigger the validation of the attribute with the specified ID\n        validateAttribute: function (id) {\n            var attribute = methods.find.call(this, id);\n            if (attribute != undefined) {\n                validateAttribute($(this), attribute, true);\n            }\n        },\n\n        // find an attribute config based on the specified attribute ID\n        find: function (id) {\n            var attributes = $(this).data('yiiActiveForm').attributes,\n                result = undefined;\n            $.each(attributes, function (i) {\n                if (attributes[i]['id'] == id) {\n                    result = attributes[i];\n                    return false;\n                }\n            });\n            return result;\n        },\n\n        destroy: function () {\n            return this.each(function () {\n                $(this).unbind('.yiiActiveForm');\n                $(this).removeData('yiiActiveForm');\n            });\n        },\n\n        data: function () {\n            return this.data('yiiActiveForm');\n        },\n\n        // validate all applicable inputs in the form\n        validate: function () {\n            var $form = $(this),\n                data = $form.data('yiiActiveForm'),\n                needAjaxValidation = false,\n                messages = {},\n                deferreds = deferredArray(),\n                submitting = data.submitting;\n\n            if (submitting) {\n                var event = $.Event(events.beforeValidate);\n                $form.trigger(event, [messages, deferreds]);\n                if (event.result === false) {\n                    data.submitting = false;\n                    submitFinalize($form);\n                    return;\n                }\n            }\n\n            // client-side validation\n            $.each(data.attributes, function () {\n                if (!$(this.input).is(\":disabled\")) {\n                    this.cancelled = false;\n                    // perform validation only if the form is being submitted or if an attribute is pending validation\n                    if (data.submitting || this.status === 2 || this.status === 3) {\n                        var msg = messages[this.id];\n                        if (msg === undefined) {\n                            msg = [];\n                            messages[this.id] = msg;\n                        }\n                        var event = $.Event(events.beforeValidateAttribute);\n                        $form.trigger(event, [this, msg, deferreds]);\n                        if (event.result !== false) {\n                            if (this.validate) {\n                                this.validate(this, getValue($form, this), msg, deferreds, $form);\n                            }\n                            if (this.enableAjaxValidation) {\n                                needAjaxValidation = true;\n                            }\n                        } else {\n                            this.cancelled = true;\n                        }\n                    }\n                }\n            });\n\n            // ajax validation\n            $.when.apply(this, deferreds).always(function() {\n                // Remove empty message arrays\n                for (var i in messages) {\n                    if (0 === messages[i].length) {\n                        delete messages[i];\n                    }\n                }\n                if (needAjaxValidation) {\n                    var $button = data.submitObject,\n                        extData = '&' + data.settings.ajaxParam + '=' + $form.attr('id');\n                    if ($button && $button.length && $button.attr('name')) {\n                        extData += '&' + $button.attr('name') + '=' + $button.attr('value');\n                    }\n                    $.ajax({\n                        url: data.settings.validationUrl,\n                        type: $form.attr('method'),\n                        data: $form.serialize() + extData,\n                        dataType: data.settings.ajaxDataType,\n                        complete: function (jqXHR, textStatus) {\n                            $form.trigger(events.ajaxComplete, [jqXHR, textStatus]);\n                        },\n                        beforeSend: function (jqXHR, settings) {\n                            $form.trigger(events.ajaxBeforeSend, [jqXHR, settings]);\n                        },\n                        success: function (msgs) {\n                            if (msgs !== null && typeof msgs === 'object') {\n                                $.each(data.attributes, function () {\n                                    if (!this.enableAjaxValidation || this.cancelled) {\n                                        delete msgs[this.id];\n                                    }\n                                });\n                                updateInputs($form, $.extend(messages, msgs), submitting);\n                            } else {\n                                updateInputs($form, messages, submitting);\n                            }\n                        },\n                        error: function () {\n                            data.submitting = false;\n                            submitFinalize($form);\n                        }\n                    });\n                } else if (data.submitting) {\n                    // delay callback so that the form can be submitted without problem\n                    setTimeout(function () {\n                        updateInputs($form, messages, submitting);\n                    }, 200);\n                } else {\n                    updateInputs($form, messages, submitting);\n                }\n            });\n        },\n\n        submitForm: function () {\n            var $form = $(this),\n                data = $form.data('yiiActiveForm');\n\n            if (data.validated) {\n                // Second submit's call (from validate/updateInputs)\n                data.submitting = false;\n                var event = $.Event(events.beforeSubmit);\n                $form.trigger(event);\n                if (event.result === false) {\n                    data.validated = false;\n                    submitFinalize($form);\n                    return false;\n                }\n                updateHiddenButton($form);\n                return true;   // continue submitting the form since validation passes\n            } else {\n                // First submit's call (from yii.js/handleAction) - execute validating\n                setSubmitFinalizeDefer($form);\n\n                if (data.settings.timer !== undefined) {\n                    clearTimeout(data.settings.timer);\n                }\n                data.submitting = true;\n                methods.validate.call($form);\n                return false;\n            }\n        },\n\n        resetForm: function () {\n            var $form = $(this);\n            var data = $form.data('yiiActiveForm');\n            // Because we bind directly to a form reset event instead of a reset button (that may not exist),\n            // when this function is executed form input values have not been reset yet.\n            // Therefore we do the actual reset work through setTimeout.\n            setTimeout(function () {\n                $.each(data.attributes, function () {\n                    // Without setTimeout() we would get the input values that are not reset yet.\n                    this.value = getValue($form, this);\n                    this.status = 0;\n                    var $container = $form.find(this.container);\n                    $container.removeClass(\n                        data.settings.validatingCssClass + ' ' +\n                            data.settings.errorCssClass + ' ' +\n                            data.settings.successCssClass\n                    );\n                    $container.find(this.error).html('');\n                });\n                $form.find(data.settings.errorSummary).hide().find('ul').html('');\n            }, 1);\n        },\n\n        /**\n         * Updates error messages, input containers, and optionally summary as well.\n         * If an attribute is missing from messages, it is considered valid.\n         * @param messages array the validation error messages, indexed by attribute IDs\n         * @param summary whether to update summary as well.\n         */\n        updateMessages: function (messages, summary) {\n            var $form = $(this);\n            var data = $form.data('yiiActiveForm');\n            $.each(data.attributes, function () {\n                updateInput($form, this, messages);\n            });\n            if (summary) {\n                updateSummary($form, messages);\n            }\n        },\n\n        /**\n         * Updates error messages and input container of a single attribute.\n         * If messages is empty, the attribute is considered valid.\n         * @param id attribute ID\n         * @param messages array with error messages\n         */\n        updateAttribute: function(id, messages) {\n            var attribute = methods.find.call(this, id);\n            if (attribute != undefined) {\n                var msg = {};\n                msg[id] = messages;\n                updateInput($(this), attribute, msg);\n            }\n        }\n\n    };\n\n    var watchAttribute = function ($form, attribute) {\n        var $input = findInput($form, attribute);\n        if (attribute.validateOnChange) {\n            $input.on('change.yiiActiveForm', function () {\n                validateAttribute($form, attribute, false);\n            });\n        }\n        if (attribute.validateOnBlur) {\n            $input.on('blur.yiiActiveForm', function () {\n                if (attribute.status == 0 || attribute.status == 1) {\n                    validateAttribute($form, attribute, true);\n                }\n            });\n        }\n        if (attribute.validateOnType) {\n            $input.on('keyup.yiiActiveForm', function (e) {\n                if ($.inArray(e.which, [16, 17, 18, 37, 38, 39, 40]) !== -1 ) {\n                    return;\n                }\n                if (attribute.value !== getValue($form, attribute)) {\n                    validateAttribute($form, attribute, false, attribute.validationDelay);\n                }\n            });\n        }\n    };\n\n    var unwatchAttribute = function ($form, attribute) {\n        findInput($form, attribute).off('.yiiActiveForm');\n    };\n\n    var validateAttribute = function ($form, attribute, forceValidate, validationDelay) {\n        var data = $form.data('yiiActiveForm');\n\n        if (forceValidate) {\n            attribute.status = 2;\n        }\n        $.each(data.attributes, function () {\n            if (this.value !== getValue($form, this)) {\n                this.status = 2;\n                forceValidate = true;\n            }\n        });\n        if (!forceValidate) {\n            return;\n        }\n\n        if (data.settings.timer !== undefined) {\n            clearTimeout(data.settings.timer);\n        }\n        data.settings.timer = setTimeout(function () {\n            if (data.submitting || $form.is(':hidden')) {\n                return;\n            }\n            $.each(data.attributes, function () {\n                if (this.status === 2) {\n                    this.status = 3;\n                    $form.find(this.container).addClass(data.settings.validatingCssClass);\n                }\n            });\n            methods.validate.call($form);\n        }, validationDelay ? validationDelay : 200);\n    };\n\n    /**\n     * Returns an array prototype with a shortcut method for adding a new deferred.\n     * The context of the callback will be the deferred object so it can be resolved like ```this.resolve()```\n     * @returns Array\n     */\n    var deferredArray = function () {\n        var array = [];\n        array.add = function(callback) {\n            this.push(new $.Deferred(callback));\n        };\n        return array;\n    };\n\n    /**\n     * Updates the error messages and the input containers for all applicable attributes\n     * @param $form the form jQuery object\n     * @param messages array the validation error messages\n     * @param submitting whether this method is called after validation triggered by form submission\n     */\n    var updateInputs = function ($form, messages, submitting) {\n        var data = $form.data('yiiActiveForm');\n\n        if (submitting) {\n            var errorAttributes = [];\n            $.each(data.attributes, function () {\n                if (!$(this.input).is(\":disabled\") && !this.cancelled && updateInput($form, this, messages)) {\n                    errorAttributes.push(this);\n                }\n            });\n\n            $form.trigger(events.afterValidate, [messages, errorAttributes]);\n\n            updateSummary($form, messages);\n\n            if (errorAttributes.length) {\n                if (data.settings.scrollToError) {\n                    var top = $form.find($.map(errorAttributes, function(attribute) {\n                        return attribute.input;\n                    }).join(',')).first().closest(':visible').offset().top;\n                    var wtop = $(window).scrollTop();\n                    if (top < wtop || top > wtop + $(window).height()) {\n                        $(window).scrollTop(top);\n                    }\n                }\n                data.submitting = false;\n            } else {\n                data.validated = true;\n                $form.submit();\n            }\n        } else {\n            $.each(data.attributes, function () {\n                if (!this.cancelled && (this.status === 2 || this.status === 3)) {\n                    updateInput($form, this, messages);\n                }\n            });\n        }\n        submitFinalize($form);\n    };\n\n    /**\n     * Updates hidden field that represents clicked submit button.\n     * @param $form the form jQuery object.\n     */\n    var updateHiddenButton = function ($form) {\n        var data = $form.data('yiiActiveForm');\n        var $button = data.submitObject || $form.find(':submit:first');\n        // TODO: if the submission is caused by \"change\" event, it will not work\n        if ($button.length && $button.attr('type') == 'submit' && $button.attr('name')) {\n            // simulate button input value\n            var $hiddenButton = $('input[type=\"hidden\"][name=\"' + $button.attr('name') + '\"]', $form);\n            if (!$hiddenButton.length) {\n                $('<input>').attr({\n                    type: 'hidden',\n                    name: $button.attr('name'),\n                    value: $button.attr('value')\n                }).appendTo($form);\n            } else {\n                $hiddenButton.attr('value', $button.attr('value'));\n            }\n        }\n    };\n\n    /**\n     * Updates the error message and the input container for a particular attribute.\n     * @param $form the form jQuery object\n     * @param attribute object the configuration for a particular attribute.\n     * @param messages array the validation error messages\n     * @return boolean whether there is a validation error for the specified attribute\n     */\n    var updateInput = function ($form, attribute, messages) {\n        var data = $form.data('yiiActiveForm'),\n            $input = findInput($form, attribute),\n            hasError = false;\n\n        if (!$.isArray(messages[attribute.id])) {\n            messages[attribute.id] = [];\n        }\n        $form.trigger(events.afterValidateAttribute, [attribute, messages[attribute.id]]);\n\n        attribute.status = 1;\n        if ($input.length) {\n            hasError = messages[attribute.id].length > 0;\n            var $container = $form.find(attribute.container);\n            var $error = $container.find(attribute.error);\n            if (hasError) {\n                if (attribute.encodeError) {\n                    $error.text(messages[attribute.id][0]);\n                } else {\n                    $error.html(messages[attribute.id][0]);\n                }\n                $container.removeClass(data.settings.validatingCssClass + ' ' + data.settings.successCssClass)\n                    .addClass(data.settings.errorCssClass);\n            } else {\n                $error.empty();\n                $container.removeClass(data.settings.validatingCssClass + ' ' + data.settings.errorCssClass + ' ')\n                    .addClass(data.settings.successCssClass);\n            }\n            attribute.value = getValue($form, attribute);\n        }\n        return hasError;\n    };\n\n    /**\n     * Updates the error summary.\n     * @param $form the form jQuery object\n     * @param messages array the validation error messages\n     */\n    var updateSummary = function ($form, messages) {\n        var data = $form.data('yiiActiveForm'),\n            $summary = $form.find(data.settings.errorSummary),\n            $ul = $summary.find('ul').empty();\n\n        if ($summary.length && messages) {\n            $.each(data.attributes, function () {\n                if ($.isArray(messages[this.id]) && messages[this.id].length) {\n                    var error = $('<li/>');\n                    if (data.settings.encodeErrorSummary) {\n                        error.text(messages[this.id][0]);\n                    } else {\n                        error.html(messages[this.id][0]);\n                    }\n                    $ul.append(error);\n                }\n            });\n            $summary.toggle($ul.find('li').length > 0);\n        }\n    };\n\n    var getValue = function ($form, attribute) {\n        var $input = findInput($form, attribute);\n        var type = $input.attr('type');\n        if (type === 'checkbox' || type === 'radio') {\n            var $realInput = $input.filter(':checked');\n            if (!$realInput.length) {\n                $realInput = $form.find('input[type=hidden][name=\"' + $input.attr('name') + '\"]');\n            }\n            return $realInput.val();\n        } else {\n            return $input.val();\n        }\n    };\n\n    var findInput = function ($form, attribute) {\n        var $input = $form.find(attribute.input);\n        if ($input.length && $input[0].tagName.toLowerCase() === 'div') {\n            // checkbox list or radio list\n            return $input.find('input');\n        } else {\n            return $input;\n        }\n    };\n\n})(window.jQuery);\n//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vYmFja2VuZC92ZW5kb3IveWlpc29mdC95aWkyL2Fzc2V0cy95aWkuYWN0aXZlRm9ybS5qcz81MmYwIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsMENBQTBDLHlCQUF5QjtBQUNuRTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4Q0FBOEMsNkJBQTZCO0FBQzNFO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msa0NBQWtDO0FBQ3BFO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUzs7QUFFVDtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QixhQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYUFBYTtBQUNiLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUEsQ0FBQyIsImZpbGUiOiIyMjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFlpaSBmb3JtIHdpZGdldC5cbiAqXG4gKiBUaGlzIGlzIHRoZSBKYXZhU2NyaXB0IHdpZGdldCB1c2VkIGJ5IHRoZSB5aWlcXHdpZGdldHNcXEFjdGl2ZUZvcm0gd2lkZ2V0LlxuICpcbiAqIEBsaW5rIGh0dHA6Ly93d3cueWlpZnJhbWV3b3JrLmNvbS9cbiAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IChjKSAyMDA4IFlpaSBTb2Z0d2FyZSBMTENcbiAqIEBsaWNlbnNlIGh0dHA6Ly93d3cueWlpZnJhbWV3b3JrLmNvbS9saWNlbnNlL1xuICogQGF1dGhvciBRaWFuZyBYdWUgPHFpYW5nLnh1ZUBnbWFpbC5jb20+XG4gKiBAc2luY2UgMi4wXG4gKi9cbihmdW5jdGlvbiAoJCkge1xuXG4gICAgJC5mbi55aWlBY3RpdmVGb3JtID0gZnVuY3Rpb24gKG1ldGhvZCkge1xuICAgICAgICBpZiAobWV0aG9kc1ttZXRob2RdKSB7XG4gICAgICAgICAgICByZXR1cm4gbWV0aG9kc1ttZXRob2RdLmFwcGx5KHRoaXMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBtZXRob2QgPT09ICdvYmplY3QnIHx8ICFtZXRob2QpIHtcbiAgICAgICAgICAgIHJldHVybiBtZXRob2RzLmluaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQuZXJyb3IoJ01ldGhvZCAnICsgbWV0aG9kICsgJyBkb2VzIG5vdCBleGlzdCBvbiBqUXVlcnkueWlpQWN0aXZlRm9ybScpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBldmVudHMgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBiZWZvcmVWYWxpZGF0ZSBldmVudCBpcyB0cmlnZ2VyZWQgYmVmb3JlIHZhbGlkYXRpbmcgdGhlIHdob2xlIGZvcm0uXG4gICAgICAgICAqIFRoZSBzaWduYXR1cmUgb2YgdGhlIGV2ZW50IGhhbmRsZXIgc2hvdWxkIGJlOlxuICAgICAgICAgKiAgICAgZnVuY3Rpb24gKGV2ZW50LCBtZXNzYWdlcywgZGVmZXJyZWRzKVxuICAgICAgICAgKiB3aGVyZVxuICAgICAgICAgKiAgLSBldmVudDogYW4gRXZlbnQgb2JqZWN0LlxuICAgICAgICAgKiAgLSBtZXNzYWdlczogYW4gYXNzb2NpYXRpdmUgYXJyYXkgd2l0aCBrZXlzIGJlaW5nIGF0dHJpYnV0ZSBJRHMgYW5kIHZhbHVlcyBiZWluZyBlcnJvciBtZXNzYWdlIGFycmF5c1xuICAgICAgICAgKiAgICBmb3IgdGhlIGNvcnJlc3BvbmRpbmcgYXR0cmlidXRlcy5cbiAgICAgICAgICogIC0gZGVmZXJyZWRzOiBhbiBhcnJheSBvZiBEZWZlcnJlZCBvYmplY3RzLiBZb3UgY2FuIHVzZSBkZWZlcnJlZHMuYWRkKGNhbGxiYWNrKSB0byBhZGQgYSBuZXcgZGVmZXJyZWQgdmFsaWRhdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogSWYgdGhlIGhhbmRsZXIgcmV0dXJucyBhIGJvb2xlYW4gZmFsc2UsIGl0IHdpbGwgc3RvcCBmdXJ0aGVyIGZvcm0gdmFsaWRhdGlvbiBhZnRlciB0aGlzIGV2ZW50LiBBbmQgYXNcbiAgICAgICAgICogYSByZXN1bHQsIGFmdGVyVmFsaWRhdGUgZXZlbnQgd2lsbCBub3QgYmUgdHJpZ2dlcmVkLlxuICAgICAgICAgKi9cbiAgICAgICAgYmVmb3JlVmFsaWRhdGU6ICdiZWZvcmVWYWxpZGF0ZScsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBhZnRlclZhbGlkYXRlIGV2ZW50IGlzIHRyaWdnZXJlZCBhZnRlciB2YWxpZGF0aW5nIHRoZSB3aG9sZSBmb3JtLlxuICAgICAgICAgKiBUaGUgc2lnbmF0dXJlIG9mIHRoZSBldmVudCBoYW5kbGVyIHNob3VsZCBiZTpcbiAgICAgICAgICogICAgIGZ1bmN0aW9uIChldmVudCwgbWVzc2FnZXMsIGVycm9yQXR0cmlidXRlcylcbiAgICAgICAgICogd2hlcmVcbiAgICAgICAgICogIC0gZXZlbnQ6IGFuIEV2ZW50IG9iamVjdC5cbiAgICAgICAgICogIC0gbWVzc2FnZXM6IGFuIGFzc29jaWF0aXZlIGFycmF5IHdpdGgga2V5cyBiZWluZyBhdHRyaWJ1dGUgSURzIGFuZCB2YWx1ZXMgYmVpbmcgZXJyb3IgbWVzc2FnZSBhcnJheXNcbiAgICAgICAgICogICAgZm9yIHRoZSBjb3JyZXNwb25kaW5nIGF0dHJpYnV0ZXMuXG4gICAgICAgICAqICAtIGVycm9yQXR0cmlidXRlczogYW4gYXJyYXkgb2YgYXR0cmlidXRlcyB0aGF0IGhhdmUgdmFsaWRhdGlvbiBlcnJvcnMuIFBsZWFzZSByZWZlciB0byBhdHRyaWJ1dGVEZWZhdWx0cyBmb3IgdGhlIHN0cnVjdHVyZSBvZiB0aGlzIHBhcmFtZXRlci5cbiAgICAgICAgICovXG4gICAgICAgIGFmdGVyVmFsaWRhdGU6ICdhZnRlclZhbGlkYXRlJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGJlZm9yZVZhbGlkYXRlQXR0cmlidXRlIGV2ZW50IGlzIHRyaWdnZXJlZCBiZWZvcmUgdmFsaWRhdGluZyBhbiBhdHRyaWJ1dGUuXG4gICAgICAgICAqIFRoZSBzaWduYXR1cmUgb2YgdGhlIGV2ZW50IGhhbmRsZXIgc2hvdWxkIGJlOlxuICAgICAgICAgKiAgICAgZnVuY3Rpb24gKGV2ZW50LCBhdHRyaWJ1dGUsIG1lc3NhZ2VzLCBkZWZlcnJlZHMpXG4gICAgICAgICAqIHdoZXJlXG4gICAgICAgICAqICAtIGV2ZW50OiBhbiBFdmVudCBvYmplY3QuXG4gICAgICAgICAqICAtIGF0dHJpYnV0ZTogdGhlIGF0dHJpYnV0ZSB0byBiZSB2YWxpZGF0ZWQuIFBsZWFzZSByZWZlciB0byBhdHRyaWJ1dGVEZWZhdWx0cyBmb3IgdGhlIHN0cnVjdHVyZSBvZiB0aGlzIHBhcmFtZXRlci5cbiAgICAgICAgICogIC0gbWVzc2FnZXM6IGFuIGFycmF5IHRvIHdoaWNoIHlvdSBjYW4gYWRkIHZhbGlkYXRpb24gZXJyb3IgbWVzc2FnZXMgZm9yIHRoZSBzcGVjaWZpZWQgYXR0cmlidXRlLlxuICAgICAgICAgKiAgLSBkZWZlcnJlZHM6IGFuIGFycmF5IG9mIERlZmVycmVkIG9iamVjdHMuIFlvdSBjYW4gdXNlIGRlZmVycmVkcy5hZGQoY2FsbGJhY2spIHRvIGFkZCBhIG5ldyBkZWZlcnJlZCB2YWxpZGF0aW9uLlxuICAgICAgICAgKlxuICAgICAgICAgKiBJZiB0aGUgaGFuZGxlciByZXR1cm5zIGEgYm9vbGVhbiBmYWxzZSwgaXQgd2lsbCBzdG9wIGZ1cnRoZXIgdmFsaWRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGF0dHJpYnV0ZS5cbiAgICAgICAgICogQW5kIGFzIGEgcmVzdWx0LCBhZnRlclZhbGlkYXRlQXR0cmlidXRlIGV2ZW50IHdpbGwgbm90IGJlIHRyaWdnZXJlZC5cbiAgICAgICAgICovXG4gICAgICAgIGJlZm9yZVZhbGlkYXRlQXR0cmlidXRlOiAnYmVmb3JlVmFsaWRhdGVBdHRyaWJ1dGUnLFxuICAgICAgICAvKipcbiAgICAgICAgICogYWZ0ZXJWYWxpZGF0ZUF0dHJpYnV0ZSBldmVudCBpcyB0cmlnZ2VyZWQgYWZ0ZXIgdmFsaWRhdGluZyB0aGUgd2hvbGUgZm9ybSBhbmQgZWFjaCBhdHRyaWJ1dGUuXG4gICAgICAgICAqIFRoZSBzaWduYXR1cmUgb2YgdGhlIGV2ZW50IGhhbmRsZXIgc2hvdWxkIGJlOlxuICAgICAgICAgKiAgICAgZnVuY3Rpb24gKGV2ZW50LCBhdHRyaWJ1dGUsIG1lc3NhZ2VzKVxuICAgICAgICAgKiB3aGVyZVxuICAgICAgICAgKiAgLSBldmVudDogYW4gRXZlbnQgb2JqZWN0LlxuICAgICAgICAgKiAgLSBhdHRyaWJ1dGU6IHRoZSBhdHRyaWJ1dGUgYmVpbmcgdmFsaWRhdGVkLiBQbGVhc2UgcmVmZXIgdG8gYXR0cmlidXRlRGVmYXVsdHMgZm9yIHRoZSBzdHJ1Y3R1cmUgb2YgdGhpcyBwYXJhbWV0ZXIuXG4gICAgICAgICAqICAtIG1lc3NhZ2VzOiBhbiBhcnJheSB0byB3aGljaCB5b3UgY2FuIGFkZCBhZGRpdGlvbmFsIHZhbGlkYXRpb24gZXJyb3IgbWVzc2FnZXMgZm9yIHRoZSBzcGVjaWZpZWQgYXR0cmlidXRlLlxuICAgICAgICAgKi9cbiAgICAgICAgYWZ0ZXJWYWxpZGF0ZUF0dHJpYnV0ZTogJ2FmdGVyVmFsaWRhdGVBdHRyaWJ1dGUnLFxuICAgICAgICAvKipcbiAgICAgICAgICogYmVmb3JlU3VibWl0IGV2ZW50IGlzIHRyaWdnZXJlZCBiZWZvcmUgc3VibWl0dGluZyB0aGUgZm9ybSBhZnRlciBhbGwgdmFsaWRhdGlvbnMgaGF2ZSBwYXNzZWQuXG4gICAgICAgICAqIFRoZSBzaWduYXR1cmUgb2YgdGhlIGV2ZW50IGhhbmRsZXIgc2hvdWxkIGJlOlxuICAgICAgICAgKiAgICAgZnVuY3Rpb24gKGV2ZW50KVxuICAgICAgICAgKiB3aGVyZSBldmVudCBpcyBhbiBFdmVudCBvYmplY3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIElmIHRoZSBoYW5kbGVyIHJldHVybnMgYSBib29sZWFuIGZhbHNlLCBpdCB3aWxsIHN0b3AgZm9ybSBzdWJtaXNzaW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgYmVmb3JlU3VibWl0OiAnYmVmb3JlU3VibWl0JyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGFqYXhCZWZvcmVTZW5kIGV2ZW50IGlzIHRyaWdnZXJlZCBiZWZvcmUgc2VuZGluZyBhbiBBSkFYIHJlcXVlc3QgZm9yIEFKQVgtYmFzZWQgdmFsaWRhdGlvbi5cbiAgICAgICAgICogVGhlIHNpZ25hdHVyZSBvZiB0aGUgZXZlbnQgaGFuZGxlciBzaG91bGQgYmU6XG4gICAgICAgICAqICAgICBmdW5jdGlvbiAoZXZlbnQsIGpxWEhSLCBzZXR0aW5ncylcbiAgICAgICAgICogd2hlcmVcbiAgICAgICAgICogIC0gZXZlbnQ6IGFuIEV2ZW50IG9iamVjdC5cbiAgICAgICAgICogIC0ganFYSFI6IGEganFYSFIgb2JqZWN0XG4gICAgICAgICAqICAtIHNldHRpbmdzOiB0aGUgc2V0dGluZ3MgZm9yIHRoZSBBSkFYIHJlcXVlc3RcbiAgICAgICAgICovXG4gICAgICAgIGFqYXhCZWZvcmVTZW5kOiAnYWpheEJlZm9yZVNlbmQnLFxuICAgICAgICAvKipcbiAgICAgICAgICogYWpheENvbXBsZXRlIGV2ZW50IGlzIHRyaWdnZXJlZCBhZnRlciBjb21wbGV0aW5nIGFuIEFKQVggcmVxdWVzdCBmb3IgQUpBWC1iYXNlZCB2YWxpZGF0aW9uLlxuICAgICAgICAgKiBUaGUgc2lnbmF0dXJlIG9mIHRoZSBldmVudCBoYW5kbGVyIHNob3VsZCBiZTpcbiAgICAgICAgICogICAgIGZ1bmN0aW9uIChldmVudCwganFYSFIsIHRleHRTdGF0dXMpXG4gICAgICAgICAqIHdoZXJlXG4gICAgICAgICAqICAtIGV2ZW50OiBhbiBFdmVudCBvYmplY3QuXG4gICAgICAgICAqICAtIGpxWEhSOiBhIGpxWEhSIG9iamVjdFxuICAgICAgICAgKiAgLSB0ZXh0U3RhdHVzOiB0aGUgc3RhdHVzIG9mIHRoZSByZXF1ZXN0IChcInN1Y2Nlc3NcIiwgXCJub3Rtb2RpZmllZFwiLCBcImVycm9yXCIsIFwidGltZW91dFwiLCBcImFib3J0XCIsIG9yIFwicGFyc2VyZXJyb3JcIikuXG4gICAgICAgICAqL1xuICAgICAgICBhamF4Q29tcGxldGU6ICdhamF4Q29tcGxldGUnXG4gICAgfTtcblxuICAgIC8vIE5PVEU6IElmIHlvdSBjaGFuZ2UgYW55IG9mIHRoZXNlIGRlZmF1bHRzLCBtYWtlIHN1cmUgeW91IHVwZGF0ZSB5aWlcXHdpZGdldHNcXEFjdGl2ZUZvcm06OmdldENsaWVudE9wdGlvbnMoKSBhcyB3ZWxsXG4gICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICAvLyB3aGV0aGVyIHRvIGVuY29kZSB0aGUgZXJyb3Igc3VtbWFyeVxuICAgICAgICBlbmNvZGVFcnJvclN1bW1hcnk6IHRydWUsXG4gICAgICAgIC8vIHRoZSBqUXVlcnkgc2VsZWN0b3IgZm9yIHRoZSBlcnJvciBzdW1tYXJ5XG4gICAgICAgIGVycm9yU3VtbWFyeTogJy5lcnJvci1zdW1tYXJ5JyxcbiAgICAgICAgLy8gd2hldGhlciB0byBwZXJmb3JtIHZhbGlkYXRpb24gYmVmb3JlIHN1Ym1pdHRpbmcgdGhlIGZvcm0uXG4gICAgICAgIHZhbGlkYXRlT25TdWJtaXQ6IHRydWUsXG4gICAgICAgIC8vIHRoZSBjb250YWluZXIgQ1NTIGNsYXNzIHJlcHJlc2VudGluZyB0aGUgY29ycmVzcG9uZGluZyBhdHRyaWJ1dGUgaGFzIHZhbGlkYXRpb24gZXJyb3JcbiAgICAgICAgZXJyb3JDc3NDbGFzczogJ2hhcy1lcnJvcicsXG4gICAgICAgIC8vIHRoZSBjb250YWluZXIgQ1NTIGNsYXNzIHJlcHJlc2VudGluZyB0aGUgY29ycmVzcG9uZGluZyBhdHRyaWJ1dGUgcGFzc2VzIHZhbGlkYXRpb25cbiAgICAgICAgc3VjY2Vzc0Nzc0NsYXNzOiAnaGFzLXN1Y2Nlc3MnLFxuICAgICAgICAvLyB0aGUgY29udGFpbmVyIENTUyBjbGFzcyByZXByZXNlbnRpbmcgdGhlIGNvcnJlc3BvbmRpbmcgYXR0cmlidXRlIGlzIGJlaW5nIHZhbGlkYXRlZFxuICAgICAgICB2YWxpZGF0aW5nQ3NzQ2xhc3M6ICd2YWxpZGF0aW5nJyxcbiAgICAgICAgLy8gdGhlIEdFVCBwYXJhbWV0ZXIgbmFtZSBpbmRpY2F0aW5nIGFuIEFKQVgtYmFzZWQgdmFsaWRhdGlvblxuICAgICAgICBhamF4UGFyYW06ICdhamF4JyxcbiAgICAgICAgLy8gdGhlIHR5cGUgb2YgZGF0YSB0aGF0IHlvdSdyZSBleHBlY3RpbmcgYmFjayBmcm9tIHRoZSBzZXJ2ZXJcbiAgICAgICAgYWpheERhdGFUeXBlOiAnanNvbicsXG4gICAgICAgIC8vIHRoZSBVUkwgZm9yIHBlcmZvcm1pbmcgQUpBWC1iYXNlZCB2YWxpZGF0aW9uLiBJZiBub3Qgc2V0LCBpdCB3aWxsIHVzZSB0aGUgdGhlIGZvcm0ncyBhY3Rpb25cbiAgICAgICAgdmFsaWRhdGlvblVybDogdW5kZWZpbmVkLFxuICAgICAgICAvLyB3aGV0aGVyIHRvIHNjcm9sbCB0byBmaXJzdCB2aXNpYmxlIGVycm9yIGFmdGVyIHZhbGlkYXRpb24uXG4gICAgICAgIHNjcm9sbFRvRXJyb3I6IHRydWVcbiAgICB9O1xuXG4gICAgLy8gTk9URTogSWYgeW91IGNoYW5nZSBhbnkgb2YgdGhlc2UgZGVmYXVsdHMsIG1ha2Ugc3VyZSB5b3UgdXBkYXRlIHlpaVxcd2lkZ2V0c1xcQWN0aXZlRmllbGQ6OmdldENsaWVudE9wdGlvbnMoKSBhcyB3ZWxsXG4gICAgdmFyIGF0dHJpYnV0ZURlZmF1bHRzID0ge1xuICAgICAgICAvLyBhIHVuaXF1ZSBJRCBpZGVudGlmeWluZyBhbiBhdHRyaWJ1dGUgKGUuZy4gXCJsb2dpbmZvcm0tdXNlcm5hbWVcIikgaW4gYSBmb3JtXG4gICAgICAgIGlkOiB1bmRlZmluZWQsXG4gICAgICAgIC8vIGF0dHJpYnV0ZSBuYW1lIG9yIGV4cHJlc3Npb24gKGUuZy4gXCJbMF1jb250ZW50XCIgZm9yIHRhYnVsYXIgaW5wdXQpXG4gICAgICAgIG5hbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgLy8gdGhlIGpRdWVyeSBzZWxlY3RvciBvZiB0aGUgY29udGFpbmVyIG9mIHRoZSBpbnB1dCBmaWVsZFxuICAgICAgICBjb250YWluZXI6IHVuZGVmaW5lZCxcbiAgICAgICAgLy8gdGhlIGpRdWVyeSBzZWxlY3RvciBvZiB0aGUgaW5wdXQgZmllbGQgdW5kZXIgdGhlIGNvbnRleHQgb2YgdGhlIGZvcm1cbiAgICAgICAgaW5wdXQ6IHVuZGVmaW5lZCxcbiAgICAgICAgLy8gdGhlIGpRdWVyeSBzZWxlY3RvciBvZiB0aGUgZXJyb3IgdGFnIHVuZGVyIHRoZSBjb250ZXh0IG9mIHRoZSBjb250YWluZXJcbiAgICAgICAgZXJyb3I6ICcuaGVscC1ibG9jaycsXG4gICAgICAgIC8vIHdoZXRoZXIgdG8gZW5jb2RlIHRoZSBlcnJvclxuICAgICAgICBlbmNvZGVFcnJvcjogdHJ1ZSxcbiAgICAgICAgLy8gd2hldGhlciB0byBwZXJmb3JtIHZhbGlkYXRpb24gd2hlbiBhIGNoYW5nZSBpcyBkZXRlY3RlZCBvbiB0aGUgaW5wdXRcbiAgICAgICAgdmFsaWRhdGVPbkNoYW5nZTogdHJ1ZSxcbiAgICAgICAgLy8gd2hldGhlciB0byBwZXJmb3JtIHZhbGlkYXRpb24gd2hlbiB0aGUgaW5wdXQgbG9zZXMgZm9jdXNcbiAgICAgICAgdmFsaWRhdGVPbkJsdXI6IHRydWUsXG4gICAgICAgIC8vIHdoZXRoZXIgdG8gcGVyZm9ybSB2YWxpZGF0aW9uIHdoZW4gdGhlIHVzZXIgaXMgdHlwaW5nLlxuICAgICAgICB2YWxpZGF0ZU9uVHlwZTogZmFsc2UsXG4gICAgICAgIC8vIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdGhhdCB0aGUgdmFsaWRhdGlvbiBzaG91bGQgYmUgZGVsYXllZCB3aGVuIGEgdXNlciBpcyB0eXBpbmcgaW4gdGhlIGlucHV0IGZpZWxkLlxuICAgICAgICB2YWxpZGF0aW9uRGVsYXk6IDUwMCxcbiAgICAgICAgLy8gd2hldGhlciB0byBlbmFibGUgQUpBWC1iYXNlZCB2YWxpZGF0aW9uLlxuICAgICAgICBlbmFibGVBamF4VmFsaWRhdGlvbjogZmFsc2UsXG4gICAgICAgIC8vIGZ1bmN0aW9uIChhdHRyaWJ1dGUsIHZhbHVlLCBtZXNzYWdlcywgZGVmZXJyZWQsICRmb3JtKSwgdGhlIGNsaWVudC1zaWRlIHZhbGlkYXRpb24gZnVuY3Rpb24uXG4gICAgICAgIHZhbGlkYXRlOiB1bmRlZmluZWQsXG4gICAgICAgIC8vIHN0YXR1cyBvZiB0aGUgaW5wdXQgZmllbGQsIDA6IGVtcHR5LCBub3QgZW50ZXJlZCBiZWZvcmUsIDE6IHZhbGlkYXRlZCwgMjogcGVuZGluZyB2YWxpZGF0aW9uLCAzOiB2YWxpZGF0aW5nXG4gICAgICAgIHN0YXR1czogMCxcbiAgICAgICAgLy8gd2hldGhlciB0aGUgdmFsaWRhdGlvbiBpcyBjYW5jZWxsZWQgYnkgYmVmb3JlVmFsaWRhdGVBdHRyaWJ1dGUgZXZlbnQgaGFuZGxlclxuICAgICAgICBjYW5jZWxsZWQ6IGZhbHNlLFxuICAgICAgICAvLyB0aGUgdmFsdWUgb2YgdGhlIGlucHV0XG4gICAgICAgIHZhbHVlOiB1bmRlZmluZWRcbiAgICB9O1xuXG5cbiAgICB2YXIgc3VibWl0RGVmZXI7XG5cbiAgICB2YXIgc2V0U3VibWl0RmluYWxpemVEZWZlciA9IGZ1bmN0aW9uKCRmb3JtKSB7XG4gICAgICAgIHN1Ym1pdERlZmVyID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAkZm9ybS5kYXRhKCd5aWlTdWJtaXRGaW5hbGl6ZVByb21pc2UnLCBzdWJtaXREZWZlci5wcm9taXNlKCkpO1xuICAgIH07XG5cbiAgICAvLyBmaW5hbGl6ZSB5aWkuanMgJGZvcm0uc3VibWl0XG4gICAgdmFyIHN1Ym1pdEZpbmFsaXplID0gZnVuY3Rpb24oJGZvcm0pIHtcbiAgICAgICAgaWYoc3VibWl0RGVmZXIpIHtcbiAgICAgICAgICAgIHN1Ym1pdERlZmVyLnJlc29sdmUoKTtcbiAgICAgICAgICAgIHN1Ym1pdERlZmVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgJGZvcm0ucmVtb3ZlRGF0YSgneWlpU3VibWl0RmluYWxpemVQcm9taXNlJyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cbiAgICB2YXIgbWV0aG9kcyA9IHtcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKGF0dHJpYnV0ZXMsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciAkZm9ybSA9ICQodGhpcyk7XG4gICAgICAgICAgICAgICAgaWYgKCRmb3JtLmRhdGEoJ3lpaUFjdGl2ZUZvcm0nKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIHNldHRpbmdzID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBvcHRpb25zIHx8IHt9KTtcbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MudmFsaWRhdGlvblVybCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLnZhbGlkYXRpb25VcmwgPSAkZm9ybS5hdHRyKCdhY3Rpb24nKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkLmVhY2goYXR0cmlidXRlcywgZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlc1tpXSA9ICQuZXh0ZW5kKHt2YWx1ZTogZ2V0VmFsdWUoJGZvcm0sIHRoaXMpfSwgYXR0cmlidXRlRGVmYXVsdHMsIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB3YXRjaEF0dHJpYnV0ZSgkZm9ybSwgYXR0cmlidXRlc1tpXSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAkZm9ybS5kYXRhKCd5aWlBY3RpdmVGb3JtJywge1xuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nczogc2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsXG4gICAgICAgICAgICAgICAgICAgIHN1Ym1pdHRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDbGVhbiB1cCBlcnJvciBzdGF0dXMgd2hlbiB0aGUgZm9ybSBpcyByZXNldC5cbiAgICAgICAgICAgICAgICAgKiBOb3RlIHRoYXQgJGZvcm0ub24oJ3Jlc2V0JywgLi4uKSBkb2VzIHdvcmsgYmVjYXVzZSB0aGUgXCJyZXNldFwiIGV2ZW50IGRvZXMgbm90IGJ1YmJsZSBvbiBJRS5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAkZm9ybS5iaW5kKCdyZXNldC55aWlBY3RpdmVGb3JtJywgbWV0aG9kcy5yZXNldEZvcm0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnZhbGlkYXRlT25TdWJtaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgJGZvcm0ub24oJ21vdXNldXAueWlpQWN0aXZlRm9ybSBrZXl1cC55aWlBY3RpdmVGb3JtJywgJzpzdWJtaXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZm9ybS5kYXRhKCd5aWlBY3RpdmVGb3JtJykuc3VibWl0T2JqZWN0ID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICRmb3JtLm9uKCdzdWJtaXQueWlpQWN0aXZlRm9ybScsIG1ldGhvZHMuc3VibWl0Rm9ybSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gYWRkIGEgbmV3IGF0dHJpYnV0ZSB0byB0aGUgZm9ybSBkeW5hbWljYWxseS5cbiAgICAgICAgLy8gcGxlYXNlIHJlZmVyIHRvIGF0dHJpYnV0ZURlZmF1bHRzIGZvciB0aGUgc3RydWN0dXJlIG9mIGF0dHJpYnV0ZVxuICAgICAgICBhZGQ6IGZ1bmN0aW9uIChhdHRyaWJ1dGUpIHtcbiAgICAgICAgICAgIHZhciAkZm9ybSA9ICQodGhpcyk7XG4gICAgICAgICAgICBhdHRyaWJ1dGUgPSAkLmV4dGVuZCh7dmFsdWU6IGdldFZhbHVlKCRmb3JtLCBhdHRyaWJ1dGUpfSwgYXR0cmlidXRlRGVmYXVsdHMsIGF0dHJpYnV0ZSk7XG4gICAgICAgICAgICAkZm9ybS5kYXRhKCd5aWlBY3RpdmVGb3JtJykuYXR0cmlidXRlcy5wdXNoKGF0dHJpYnV0ZSk7XG4gICAgICAgICAgICB3YXRjaEF0dHJpYnV0ZSgkZm9ybSwgYXR0cmlidXRlKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyByZW1vdmUgdGhlIGF0dHJpYnV0ZSB3aXRoIHRoZSBzcGVjaWZpZWQgSUQgZnJvbSB0aGUgZm9ybVxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgdmFyICRmb3JtID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzID0gJGZvcm0uZGF0YSgneWlpQWN0aXZlRm9ybScpLmF0dHJpYnV0ZXMsXG4gICAgICAgICAgICAgICAgaW5kZXggPSAtMSxcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAkLmVhY2goYXR0cmlidXRlcywgZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlc1tpXVsnaWQnXSA9PSBpZCkge1xuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZSA9IGF0dHJpYnV0ZXNbaV07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIHVud2F0Y2hBdHRyaWJ1dGUoJGZvcm0sIGF0dHJpYnV0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXR0cmlidXRlO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIG1hbnVhbGx5IHRyaWdnZXIgdGhlIHZhbGlkYXRpb24gb2YgdGhlIGF0dHJpYnV0ZSB3aXRoIHRoZSBzcGVjaWZpZWQgSURcbiAgICAgICAgdmFsaWRhdGVBdHRyaWJ1dGU6IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZSA9IG1ldGhvZHMuZmluZC5jYWxsKHRoaXMsIGlkKTtcbiAgICAgICAgICAgIGlmIChhdHRyaWJ1dGUgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGVBdHRyaWJ1dGUoJCh0aGlzKSwgYXR0cmlidXRlLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvLyBmaW5kIGFuIGF0dHJpYnV0ZSBjb25maWcgYmFzZWQgb24gdGhlIHNwZWNpZmllZCBhdHRyaWJ1dGUgSURcbiAgICAgICAgZmluZDogZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICB2YXIgYXR0cmlidXRlcyA9ICQodGhpcykuZGF0YSgneWlpQWN0aXZlRm9ybScpLmF0dHJpYnV0ZXMsXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgJC5lYWNoKGF0dHJpYnV0ZXMsIGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZXNbaV1bJ2lkJ10gPT0gaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gYXR0cmlidXRlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSxcblxuICAgICAgICBkZXN0cm95OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnVuYmluZCgnLnlpaUFjdGl2ZUZvcm0nKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZURhdGEoJ3lpaUFjdGl2ZUZvcm0nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGRhdGE6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEoJ3lpaUFjdGl2ZUZvcm0nKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyB2YWxpZGF0ZSBhbGwgYXBwbGljYWJsZSBpbnB1dHMgaW4gdGhlIGZvcm1cbiAgICAgICAgdmFsaWRhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciAkZm9ybSA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgZGF0YSA9ICRmb3JtLmRhdGEoJ3lpaUFjdGl2ZUZvcm0nKSxcbiAgICAgICAgICAgICAgICBuZWVkQWpheFZhbGlkYXRpb24gPSBmYWxzZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlcyA9IHt9LFxuICAgICAgICAgICAgICAgIGRlZmVycmVkcyA9IGRlZmVycmVkQXJyYXkoKSxcbiAgICAgICAgICAgICAgICBzdWJtaXR0aW5nID0gZGF0YS5zdWJtaXR0aW5nO1xuXG4gICAgICAgICAgICBpZiAoc3VibWl0dGluZykge1xuICAgICAgICAgICAgICAgIHZhciBldmVudCA9ICQuRXZlbnQoZXZlbnRzLmJlZm9yZVZhbGlkYXRlKTtcbiAgICAgICAgICAgICAgICAkZm9ybS50cmlnZ2VyKGV2ZW50LCBbbWVzc2FnZXMsIGRlZmVycmVkc10pO1xuICAgICAgICAgICAgICAgIGlmIChldmVudC5yZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3VibWl0dGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBzdWJtaXRGaW5hbGl6ZSgkZm9ybSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGNsaWVudC1zaWRlIHZhbGlkYXRpb25cbiAgICAgICAgICAgICQuZWFjaChkYXRhLmF0dHJpYnV0ZXMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoISQodGhpcy5pbnB1dCkuaXMoXCI6ZGlzYWJsZWRcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gcGVyZm9ybSB2YWxpZGF0aW9uIG9ubHkgaWYgdGhlIGZvcm0gaXMgYmVpbmcgc3VibWl0dGVkIG9yIGlmIGFuIGF0dHJpYnV0ZSBpcyBwZW5kaW5nIHZhbGlkYXRpb25cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc3VibWl0dGluZyB8fCB0aGlzLnN0YXR1cyA9PT0gMiB8fCB0aGlzLnN0YXR1cyA9PT0gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1zZyA9IG1lc3NhZ2VzW3RoaXMuaWRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1zZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXNnID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXNbdGhpcy5pZF0gPSBtc2c7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXZlbnQgPSAkLkV2ZW50KGV2ZW50cy5iZWZvcmVWYWxpZGF0ZUF0dHJpYnV0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZm9ybS50cmlnZ2VyKGV2ZW50LCBbdGhpcywgbXNnLCBkZWZlcnJlZHNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5yZXN1bHQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsaWRhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWxpZGF0ZSh0aGlzLCBnZXRWYWx1ZSgkZm9ybSwgdGhpcyksIG1zZywgZGVmZXJyZWRzLCAkZm9ybSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZUFqYXhWYWxpZGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5lZWRBamF4VmFsaWRhdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbGxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gYWpheCB2YWxpZGF0aW9uXG4gICAgICAgICAgICAkLndoZW4uYXBwbHkodGhpcywgZGVmZXJyZWRzKS5hbHdheXMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGVtcHR5IG1lc3NhZ2UgYXJyYXlzXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBtZXNzYWdlcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoMCA9PT0gbWVzc2FnZXNbaV0ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgbWVzc2FnZXNbaV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5lZWRBamF4VmFsaWRhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJGJ1dHRvbiA9IGRhdGEuc3VibWl0T2JqZWN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0RGF0YSA9ICcmJyArIGRhdGEuc2V0dGluZ3MuYWpheFBhcmFtICsgJz0nICsgJGZvcm0uYXR0cignaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRidXR0b24gJiYgJGJ1dHRvbi5sZW5ndGggJiYgJGJ1dHRvbi5hdHRyKCduYW1lJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dERhdGEgKz0gJyYnICsgJGJ1dHRvbi5hdHRyKCduYW1lJykgKyAnPScgKyAkYnV0dG9uLmF0dHIoJ3ZhbHVlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogZGF0YS5zZXR0aW5ncy52YWxpZGF0aW9uVXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJGZvcm0uYXR0cignbWV0aG9kJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiAkZm9ybS5zZXJpYWxpemUoKSArIGV4dERhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogZGF0YS5zZXR0aW5ncy5hamF4RGF0YVR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKGpxWEhSLCB0ZXh0U3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGZvcm0udHJpZ2dlcihldmVudHMuYWpheENvbXBsZXRlLCBbanFYSFIsIHRleHRTdGF0dXNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbiAoanFYSFIsIHNldHRpbmdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGZvcm0udHJpZ2dlcihldmVudHMuYWpheEJlZm9yZVNlbmQsIFtqcVhIUiwgc2V0dGluZ3NdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAobXNncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtc2dzICE9PSBudWxsICYmIHR5cGVvZiBtc2dzID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2goZGF0YS5hdHRyaWJ1dGVzLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlQWpheFZhbGlkYXRpb24gfHwgdGhpcy5jYW5jZWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgbXNnc1t0aGlzLmlkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUlucHV0cygkZm9ybSwgJC5leHRlbmQobWVzc2FnZXMsIG1zZ3MpLCBzdWJtaXR0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVJbnB1dHMoJGZvcm0sIG1lc3NhZ2VzLCBzdWJtaXR0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnN1Ym1pdHRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJtaXRGaW5hbGl6ZSgkZm9ybSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5zdWJtaXR0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRlbGF5IGNhbGxiYWNrIHNvIHRoYXQgdGhlIGZvcm0gY2FuIGJlIHN1Ym1pdHRlZCB3aXRob3V0IHByb2JsZW1cbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVJbnB1dHMoJGZvcm0sIG1lc3NhZ2VzLCBzdWJtaXR0aW5nKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMjAwKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVJbnB1dHMoJGZvcm0sIG1lc3NhZ2VzLCBzdWJtaXR0aW5nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBzdWJtaXRGb3JtOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgJGZvcm0gPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgIGRhdGEgPSAkZm9ybS5kYXRhKCd5aWlBY3RpdmVGb3JtJyk7XG5cbiAgICAgICAgICAgIGlmIChkYXRhLnZhbGlkYXRlZCkge1xuICAgICAgICAgICAgICAgIC8vIFNlY29uZCBzdWJtaXQncyBjYWxsIChmcm9tIHZhbGlkYXRlL3VwZGF0ZUlucHV0cylcbiAgICAgICAgICAgICAgICBkYXRhLnN1Ym1pdHRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2YXIgZXZlbnQgPSAkLkV2ZW50KGV2ZW50cy5iZWZvcmVTdWJtaXQpO1xuICAgICAgICAgICAgICAgICRmb3JtLnRyaWdnZXIoZXZlbnQpO1xuICAgICAgICAgICAgICAgIGlmIChldmVudC5yZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEudmFsaWRhdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHN1Ym1pdEZpbmFsaXplKCRmb3JtKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1cGRhdGVIaWRkZW5CdXR0b24oJGZvcm0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOyAgIC8vIGNvbnRpbnVlIHN1Ym1pdHRpbmcgdGhlIGZvcm0gc2luY2UgdmFsaWRhdGlvbiBwYXNzZXNcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRmlyc3Qgc3VibWl0J3MgY2FsbCAoZnJvbSB5aWkuanMvaGFuZGxlQWN0aW9uKSAtIGV4ZWN1dGUgdmFsaWRhdGluZ1xuICAgICAgICAgICAgICAgIHNldFN1Ym1pdEZpbmFsaXplRGVmZXIoJGZvcm0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuc2V0dGluZ3MudGltZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoZGF0YS5zZXR0aW5ncy50aW1lcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRhdGEuc3VibWl0dGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgbWV0aG9kcy52YWxpZGF0ZS5jYWxsKCRmb3JtKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVzZXRGb3JtOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgJGZvcm0gPSAkKHRoaXMpO1xuICAgICAgICAgICAgdmFyIGRhdGEgPSAkZm9ybS5kYXRhKCd5aWlBY3RpdmVGb3JtJyk7XG4gICAgICAgICAgICAvLyBCZWNhdXNlIHdlIGJpbmQgZGlyZWN0bHkgdG8gYSBmb3JtIHJlc2V0IGV2ZW50IGluc3RlYWQgb2YgYSByZXNldCBidXR0b24gKHRoYXQgbWF5IG5vdCBleGlzdCksXG4gICAgICAgICAgICAvLyB3aGVuIHRoaXMgZnVuY3Rpb24gaXMgZXhlY3V0ZWQgZm9ybSBpbnB1dCB2YWx1ZXMgaGF2ZSBub3QgYmVlbiByZXNldCB5ZXQuXG4gICAgICAgICAgICAvLyBUaGVyZWZvcmUgd2UgZG8gdGhlIGFjdHVhbCByZXNldCB3b3JrIHRocm91Z2ggc2V0VGltZW91dC5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQuZWFjaChkYXRhLmF0dHJpYnV0ZXMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2l0aG91dCBzZXRUaW1lb3V0KCkgd2Ugd291bGQgZ2V0IHRoZSBpbnB1dCB2YWx1ZXMgdGhhdCBhcmUgbm90IHJlc2V0IHlldC5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IGdldFZhbHVlKCRmb3JtLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgJGNvbnRhaW5lciA9ICRmb3JtLmZpbmQodGhpcy5jb250YWluZXIpO1xuICAgICAgICAgICAgICAgICAgICAkY29udGFpbmVyLnJlbW92ZUNsYXNzKFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5zZXR0aW5ncy52YWxpZGF0aW5nQ3NzQ2xhc3MgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuc2V0dGluZ3MuZXJyb3JDc3NDbGFzcyArICcgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5zZXR0aW5ncy5zdWNjZXNzQ3NzQ2xhc3NcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgJGNvbnRhaW5lci5maW5kKHRoaXMuZXJyb3IpLmh0bWwoJycpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICRmb3JtLmZpbmQoZGF0YS5zZXR0aW5ncy5lcnJvclN1bW1hcnkpLmhpZGUoKS5maW5kKCd1bCcpLmh0bWwoJycpO1xuICAgICAgICAgICAgfSwgMSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVwZGF0ZXMgZXJyb3IgbWVzc2FnZXMsIGlucHV0IGNvbnRhaW5lcnMsIGFuZCBvcHRpb25hbGx5IHN1bW1hcnkgYXMgd2VsbC5cbiAgICAgICAgICogSWYgYW4gYXR0cmlidXRlIGlzIG1pc3NpbmcgZnJvbSBtZXNzYWdlcywgaXQgaXMgY29uc2lkZXJlZCB2YWxpZC5cbiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2VzIGFycmF5IHRoZSB2YWxpZGF0aW9uIGVycm9yIG1lc3NhZ2VzLCBpbmRleGVkIGJ5IGF0dHJpYnV0ZSBJRHNcbiAgICAgICAgICogQHBhcmFtIHN1bW1hcnkgd2hldGhlciB0byB1cGRhdGUgc3VtbWFyeSBhcyB3ZWxsLlxuICAgICAgICAgKi9cbiAgICAgICAgdXBkYXRlTWVzc2FnZXM6IGZ1bmN0aW9uIChtZXNzYWdlcywgc3VtbWFyeSkge1xuICAgICAgICAgICAgdmFyICRmb3JtID0gJCh0aGlzKTtcbiAgICAgICAgICAgIHZhciBkYXRhID0gJGZvcm0uZGF0YSgneWlpQWN0aXZlRm9ybScpO1xuICAgICAgICAgICAgJC5lYWNoKGRhdGEuYXR0cmlidXRlcywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHVwZGF0ZUlucHV0KCRmb3JtLCB0aGlzLCBtZXNzYWdlcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChzdW1tYXJ5KSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlU3VtbWFyeSgkZm9ybSwgbWVzc2FnZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVcGRhdGVzIGVycm9yIG1lc3NhZ2VzIGFuZCBpbnB1dCBjb250YWluZXIgb2YgYSBzaW5nbGUgYXR0cmlidXRlLlxuICAgICAgICAgKiBJZiBtZXNzYWdlcyBpcyBlbXB0eSwgdGhlIGF0dHJpYnV0ZSBpcyBjb25zaWRlcmVkIHZhbGlkLlxuICAgICAgICAgKiBAcGFyYW0gaWQgYXR0cmlidXRlIElEXG4gICAgICAgICAqIEBwYXJhbSBtZXNzYWdlcyBhcnJheSB3aXRoIGVycm9yIG1lc3NhZ2VzXG4gICAgICAgICAqL1xuICAgICAgICB1cGRhdGVBdHRyaWJ1dGU6IGZ1bmN0aW9uKGlkLCBtZXNzYWdlcykge1xuICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZSA9IG1ldGhvZHMuZmluZC5jYWxsKHRoaXMsIGlkKTtcbiAgICAgICAgICAgIGlmIChhdHRyaWJ1dGUgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1zZyA9IHt9O1xuICAgICAgICAgICAgICAgIG1zZ1tpZF0gPSBtZXNzYWdlcztcbiAgICAgICAgICAgICAgICB1cGRhdGVJbnB1dCgkKHRoaXMpLCBhdHRyaWJ1dGUsIG1zZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICB2YXIgd2F0Y2hBdHRyaWJ1dGUgPSBmdW5jdGlvbiAoJGZvcm0sIGF0dHJpYnV0ZSkge1xuICAgICAgICB2YXIgJGlucHV0ID0gZmluZElucHV0KCRmb3JtLCBhdHRyaWJ1dGUpO1xuICAgICAgICBpZiAoYXR0cmlidXRlLnZhbGlkYXRlT25DaGFuZ2UpIHtcbiAgICAgICAgICAgICRpbnB1dC5vbignY2hhbmdlLnlpaUFjdGl2ZUZvcm0nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFsaWRhdGVBdHRyaWJ1dGUoJGZvcm0sIGF0dHJpYnV0ZSwgZmFsc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF0dHJpYnV0ZS52YWxpZGF0ZU9uQmx1cikge1xuICAgICAgICAgICAgJGlucHV0Lm9uKCdibHVyLnlpaUFjdGl2ZUZvcm0nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZS5zdGF0dXMgPT0gMCB8fCBhdHRyaWJ1dGUuc3RhdHVzID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVBdHRyaWJ1dGUoJGZvcm0sIGF0dHJpYnV0ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF0dHJpYnV0ZS52YWxpZGF0ZU9uVHlwZSkge1xuICAgICAgICAgICAgJGlucHV0Lm9uKCdrZXl1cC55aWlBY3RpdmVGb3JtJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoJC5pbkFycmF5KGUud2hpY2gsIFsxNiwgMTcsIDE4LCAzNywgMzgsIDM5LCA0MF0pICE9PSAtMSApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlLnZhbHVlICE9PSBnZXRWYWx1ZSgkZm9ybSwgYXR0cmlidXRlKSkge1xuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZUF0dHJpYnV0ZSgkZm9ybSwgYXR0cmlidXRlLCBmYWxzZSwgYXR0cmlidXRlLnZhbGlkYXRpb25EZWxheSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIHVud2F0Y2hBdHRyaWJ1dGUgPSBmdW5jdGlvbiAoJGZvcm0sIGF0dHJpYnV0ZSkge1xuICAgICAgICBmaW5kSW5wdXQoJGZvcm0sIGF0dHJpYnV0ZSkub2ZmKCcueWlpQWN0aXZlRm9ybScpO1xuICAgIH07XG5cbiAgICB2YXIgdmFsaWRhdGVBdHRyaWJ1dGUgPSBmdW5jdGlvbiAoJGZvcm0sIGF0dHJpYnV0ZSwgZm9yY2VWYWxpZGF0ZSwgdmFsaWRhdGlvbkRlbGF5KSB7XG4gICAgICAgIHZhciBkYXRhID0gJGZvcm0uZGF0YSgneWlpQWN0aXZlRm9ybScpO1xuXG4gICAgICAgIGlmIChmb3JjZVZhbGlkYXRlKSB7XG4gICAgICAgICAgICBhdHRyaWJ1dGUuc3RhdHVzID0gMjtcbiAgICAgICAgfVxuICAgICAgICAkLmVhY2goZGF0YS5hdHRyaWJ1dGVzLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZSAhPT0gZ2V0VmFsdWUoJGZvcm0sIHRoaXMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSAyO1xuICAgICAgICAgICAgICAgIGZvcmNlVmFsaWRhdGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFmb3JjZVZhbGlkYXRlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGF0YS5zZXR0aW5ncy50aW1lciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoZGF0YS5zZXR0aW5ncy50aW1lcik7XG4gICAgICAgIH1cbiAgICAgICAgZGF0YS5zZXR0aW5ncy50aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGRhdGEuc3VibWl0dGluZyB8fCAkZm9ybS5pcygnOmhpZGRlbicpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJC5lYWNoKGRhdGEuYXR0cmlidXRlcywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gMikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXR1cyA9IDM7XG4gICAgICAgICAgICAgICAgICAgICRmb3JtLmZpbmQodGhpcy5jb250YWluZXIpLmFkZENsYXNzKGRhdGEuc2V0dGluZ3MudmFsaWRhdGluZ0Nzc0NsYXNzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG1ldGhvZHMudmFsaWRhdGUuY2FsbCgkZm9ybSk7XG4gICAgICAgIH0sIHZhbGlkYXRpb25EZWxheSA/IHZhbGlkYXRpb25EZWxheSA6IDIwMCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgcHJvdG90eXBlIHdpdGggYSBzaG9ydGN1dCBtZXRob2QgZm9yIGFkZGluZyBhIG5ldyBkZWZlcnJlZC5cbiAgICAgKiBUaGUgY29udGV4dCBvZiB0aGUgY2FsbGJhY2sgd2lsbCBiZSB0aGUgZGVmZXJyZWQgb2JqZWN0IHNvIGl0IGNhbiBiZSByZXNvbHZlZCBsaWtlIGBgYHRoaXMucmVzb2x2ZSgpYGBgXG4gICAgICogQHJldHVybnMgQXJyYXlcbiAgICAgKi9cbiAgICB2YXIgZGVmZXJyZWRBcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFycmF5ID0gW107XG4gICAgICAgIGFycmF5LmFkZCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICB0aGlzLnB1c2gobmV3ICQuRGVmZXJyZWQoY2FsbGJhY2spKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBlcnJvciBtZXNzYWdlcyBhbmQgdGhlIGlucHV0IGNvbnRhaW5lcnMgZm9yIGFsbCBhcHBsaWNhYmxlIGF0dHJpYnV0ZXNcbiAgICAgKiBAcGFyYW0gJGZvcm0gdGhlIGZvcm0galF1ZXJ5IG9iamVjdFxuICAgICAqIEBwYXJhbSBtZXNzYWdlcyBhcnJheSB0aGUgdmFsaWRhdGlvbiBlcnJvciBtZXNzYWdlc1xuICAgICAqIEBwYXJhbSBzdWJtaXR0aW5nIHdoZXRoZXIgdGhpcyBtZXRob2QgaXMgY2FsbGVkIGFmdGVyIHZhbGlkYXRpb24gdHJpZ2dlcmVkIGJ5IGZvcm0gc3VibWlzc2lvblxuICAgICAqL1xuICAgIHZhciB1cGRhdGVJbnB1dHMgPSBmdW5jdGlvbiAoJGZvcm0sIG1lc3NhZ2VzLCBzdWJtaXR0aW5nKSB7XG4gICAgICAgIHZhciBkYXRhID0gJGZvcm0uZGF0YSgneWlpQWN0aXZlRm9ybScpO1xuXG4gICAgICAgIGlmIChzdWJtaXR0aW5nKSB7XG4gICAgICAgICAgICB2YXIgZXJyb3JBdHRyaWJ1dGVzID0gW107XG4gICAgICAgICAgICAkLmVhY2goZGF0YS5hdHRyaWJ1dGVzLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkKHRoaXMuaW5wdXQpLmlzKFwiOmRpc2FibGVkXCIpICYmICF0aGlzLmNhbmNlbGxlZCAmJiB1cGRhdGVJbnB1dCgkZm9ybSwgdGhpcywgbWVzc2FnZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yQXR0cmlidXRlcy5wdXNoKHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkZm9ybS50cmlnZ2VyKGV2ZW50cy5hZnRlclZhbGlkYXRlLCBbbWVzc2FnZXMsIGVycm9yQXR0cmlidXRlc10pO1xuXG4gICAgICAgICAgICB1cGRhdGVTdW1tYXJ5KCRmb3JtLCBtZXNzYWdlcyk7XG5cbiAgICAgICAgICAgIGlmIChlcnJvckF0dHJpYnV0ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuc2V0dGluZ3Muc2Nyb2xsVG9FcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG9wID0gJGZvcm0uZmluZCgkLm1hcChlcnJvckF0dHJpYnV0ZXMsIGZ1bmN0aW9uKGF0dHJpYnV0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZS5pbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgfSkuam9pbignLCcpKS5maXJzdCgpLmNsb3Nlc3QoJzp2aXNpYmxlJykub2Zmc2V0KCkudG9wO1xuICAgICAgICAgICAgICAgICAgICB2YXIgd3RvcCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvcCA8IHd0b3AgfHwgdG9wID4gd3RvcCArICQod2luZG93KS5oZWlnaHQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh3aW5kb3cpLnNjcm9sbFRvcCh0b3ApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRhdGEuc3VibWl0dGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkYXRhLnZhbGlkYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgJGZvcm0uc3VibWl0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkLmVhY2goZGF0YS5hdHRyaWJ1dGVzLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNhbmNlbGxlZCAmJiAodGhpcy5zdGF0dXMgPT09IDIgfHwgdGhpcy5zdGF0dXMgPT09IDMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUlucHV0KCRmb3JtLCB0aGlzLCBtZXNzYWdlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgc3VibWl0RmluYWxpemUoJGZvcm0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIGhpZGRlbiBmaWVsZCB0aGF0IHJlcHJlc2VudHMgY2xpY2tlZCBzdWJtaXQgYnV0dG9uLlxuICAgICAqIEBwYXJhbSAkZm9ybSB0aGUgZm9ybSBqUXVlcnkgb2JqZWN0LlxuICAgICAqL1xuICAgIHZhciB1cGRhdGVIaWRkZW5CdXR0b24gPSBmdW5jdGlvbiAoJGZvcm0pIHtcbiAgICAgICAgdmFyIGRhdGEgPSAkZm9ybS5kYXRhKCd5aWlBY3RpdmVGb3JtJyk7XG4gICAgICAgIHZhciAkYnV0dG9uID0gZGF0YS5zdWJtaXRPYmplY3QgfHwgJGZvcm0uZmluZCgnOnN1Ym1pdDpmaXJzdCcpO1xuICAgICAgICAvLyBUT0RPOiBpZiB0aGUgc3VibWlzc2lvbiBpcyBjYXVzZWQgYnkgXCJjaGFuZ2VcIiBldmVudCwgaXQgd2lsbCBub3Qgd29ya1xuICAgICAgICBpZiAoJGJ1dHRvbi5sZW5ndGggJiYgJGJ1dHRvbi5hdHRyKCd0eXBlJykgPT0gJ3N1Ym1pdCcgJiYgJGJ1dHRvbi5hdHRyKCduYW1lJykpIHtcbiAgICAgICAgICAgIC8vIHNpbXVsYXRlIGJ1dHRvbiBpbnB1dCB2YWx1ZVxuICAgICAgICAgICAgdmFyICRoaWRkZW5CdXR0b24gPSAkKCdpbnB1dFt0eXBlPVwiaGlkZGVuXCJdW25hbWU9XCInICsgJGJ1dHRvbi5hdHRyKCduYW1lJykgKyAnXCJdJywgJGZvcm0pO1xuICAgICAgICAgICAgaWYgKCEkaGlkZGVuQnV0dG9uLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICQoJzxpbnB1dD4nKS5hdHRyKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2hpZGRlbicsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICRidXR0b24uYXR0cignbmFtZScpLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJGJ1dHRvbi5hdHRyKCd2YWx1ZScpXG4gICAgICAgICAgICAgICAgfSkuYXBwZW5kVG8oJGZvcm0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkaGlkZGVuQnV0dG9uLmF0dHIoJ3ZhbHVlJywgJGJ1dHRvbi5hdHRyKCd2YWx1ZScpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBlcnJvciBtZXNzYWdlIGFuZCB0aGUgaW5wdXQgY29udGFpbmVyIGZvciBhIHBhcnRpY3VsYXIgYXR0cmlidXRlLlxuICAgICAqIEBwYXJhbSAkZm9ybSB0aGUgZm9ybSBqUXVlcnkgb2JqZWN0XG4gICAgICogQHBhcmFtIGF0dHJpYnV0ZSBvYmplY3QgdGhlIGNvbmZpZ3VyYXRpb24gZm9yIGEgcGFydGljdWxhciBhdHRyaWJ1dGUuXG4gICAgICogQHBhcmFtIG1lc3NhZ2VzIGFycmF5IHRoZSB2YWxpZGF0aW9uIGVycm9yIG1lc3NhZ2VzXG4gICAgICogQHJldHVybiBib29sZWFuIHdoZXRoZXIgdGhlcmUgaXMgYSB2YWxpZGF0aW9uIGVycm9yIGZvciB0aGUgc3BlY2lmaWVkIGF0dHJpYnV0ZVxuICAgICAqL1xuICAgIHZhciB1cGRhdGVJbnB1dCA9IGZ1bmN0aW9uICgkZm9ybSwgYXR0cmlidXRlLCBtZXNzYWdlcykge1xuICAgICAgICB2YXIgZGF0YSA9ICRmb3JtLmRhdGEoJ3lpaUFjdGl2ZUZvcm0nKSxcbiAgICAgICAgICAgICRpbnB1dCA9IGZpbmRJbnB1dCgkZm9ybSwgYXR0cmlidXRlKSxcbiAgICAgICAgICAgIGhhc0Vycm9yID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKCEkLmlzQXJyYXkobWVzc2FnZXNbYXR0cmlidXRlLmlkXSkpIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzW2F0dHJpYnV0ZS5pZF0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICAkZm9ybS50cmlnZ2VyKGV2ZW50cy5hZnRlclZhbGlkYXRlQXR0cmlidXRlLCBbYXR0cmlidXRlLCBtZXNzYWdlc1thdHRyaWJ1dGUuaWRdXSk7XG5cbiAgICAgICAgYXR0cmlidXRlLnN0YXR1cyA9IDE7XG4gICAgICAgIGlmICgkaW5wdXQubGVuZ3RoKSB7XG4gICAgICAgICAgICBoYXNFcnJvciA9IG1lc3NhZ2VzW2F0dHJpYnV0ZS5pZF0ubGVuZ3RoID4gMDtcbiAgICAgICAgICAgIHZhciAkY29udGFpbmVyID0gJGZvcm0uZmluZChhdHRyaWJ1dGUuY29udGFpbmVyKTtcbiAgICAgICAgICAgIHZhciAkZXJyb3IgPSAkY29udGFpbmVyLmZpbmQoYXR0cmlidXRlLmVycm9yKTtcbiAgICAgICAgICAgIGlmIChoYXNFcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGUuZW5jb2RlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgJGVycm9yLnRleHQobWVzc2FnZXNbYXR0cmlidXRlLmlkXVswXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJGVycm9yLmh0bWwobWVzc2FnZXNbYXR0cmlidXRlLmlkXVswXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRjb250YWluZXIucmVtb3ZlQ2xhc3MoZGF0YS5zZXR0aW5ncy52YWxpZGF0aW5nQ3NzQ2xhc3MgKyAnICcgKyBkYXRhLnNldHRpbmdzLnN1Y2Nlc3NDc3NDbGFzcylcbiAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKGRhdGEuc2V0dGluZ3MuZXJyb3JDc3NDbGFzcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRlcnJvci5lbXB0eSgpO1xuICAgICAgICAgICAgICAgICRjb250YWluZXIucmVtb3ZlQ2xhc3MoZGF0YS5zZXR0aW5ncy52YWxpZGF0aW5nQ3NzQ2xhc3MgKyAnICcgKyBkYXRhLnNldHRpbmdzLmVycm9yQ3NzQ2xhc3MgKyAnICcpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhkYXRhLnNldHRpbmdzLnN1Y2Nlc3NDc3NDbGFzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhdHRyaWJ1dGUudmFsdWUgPSBnZXRWYWx1ZSgkZm9ybSwgYXR0cmlidXRlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGFzRXJyb3I7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGVycm9yIHN1bW1hcnkuXG4gICAgICogQHBhcmFtICRmb3JtIHRoZSBmb3JtIGpRdWVyeSBvYmplY3RcbiAgICAgKiBAcGFyYW0gbWVzc2FnZXMgYXJyYXkgdGhlIHZhbGlkYXRpb24gZXJyb3IgbWVzc2FnZXNcbiAgICAgKi9cbiAgICB2YXIgdXBkYXRlU3VtbWFyeSA9IGZ1bmN0aW9uICgkZm9ybSwgbWVzc2FnZXMpIHtcbiAgICAgICAgdmFyIGRhdGEgPSAkZm9ybS5kYXRhKCd5aWlBY3RpdmVGb3JtJyksXG4gICAgICAgICAgICAkc3VtbWFyeSA9ICRmb3JtLmZpbmQoZGF0YS5zZXR0aW5ncy5lcnJvclN1bW1hcnkpLFxuICAgICAgICAgICAgJHVsID0gJHN1bW1hcnkuZmluZCgndWwnKS5lbXB0eSgpO1xuXG4gICAgICAgIGlmICgkc3VtbWFyeS5sZW5ndGggJiYgbWVzc2FnZXMpIHtcbiAgICAgICAgICAgICQuZWFjaChkYXRhLmF0dHJpYnV0ZXMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoJC5pc0FycmF5KG1lc3NhZ2VzW3RoaXMuaWRdKSAmJiBtZXNzYWdlc1t0aGlzLmlkXS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gJCgnPGxpLz4nKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc2V0dGluZ3MuZW5jb2RlRXJyb3JTdW1tYXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvci50ZXh0KG1lc3NhZ2VzW3RoaXMuaWRdWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yLmh0bWwobWVzc2FnZXNbdGhpcy5pZF1bMF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICR1bC5hcHBlbmQoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJHN1bW1hcnkudG9nZ2xlKCR1bC5maW5kKCdsaScpLmxlbmd0aCA+IDApO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBnZXRWYWx1ZSA9IGZ1bmN0aW9uICgkZm9ybSwgYXR0cmlidXRlKSB7XG4gICAgICAgIHZhciAkaW5wdXQgPSBmaW5kSW5wdXQoJGZvcm0sIGF0dHJpYnV0ZSk7XG4gICAgICAgIHZhciB0eXBlID0gJGlucHV0LmF0dHIoJ3R5cGUnKTtcbiAgICAgICAgaWYgKHR5cGUgPT09ICdjaGVja2JveCcgfHwgdHlwZSA9PT0gJ3JhZGlvJykge1xuICAgICAgICAgICAgdmFyICRyZWFsSW5wdXQgPSAkaW5wdXQuZmlsdGVyKCc6Y2hlY2tlZCcpO1xuICAgICAgICAgICAgaWYgKCEkcmVhbElucHV0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICRyZWFsSW5wdXQgPSAkZm9ybS5maW5kKCdpbnB1dFt0eXBlPWhpZGRlbl1bbmFtZT1cIicgKyAkaW5wdXQuYXR0cignbmFtZScpICsgJ1wiXScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICRyZWFsSW5wdXQudmFsKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gJGlucHV0LnZhbCgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBmaW5kSW5wdXQgPSBmdW5jdGlvbiAoJGZvcm0sIGF0dHJpYnV0ZSkge1xuICAgICAgICB2YXIgJGlucHV0ID0gJGZvcm0uZmluZChhdHRyaWJ1dGUuaW5wdXQpO1xuICAgICAgICBpZiAoJGlucHV0Lmxlbmd0aCAmJiAkaW5wdXRbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnZGl2Jykge1xuICAgICAgICAgICAgLy8gY2hlY2tib3ggbGlzdCBvciByYWRpbyBsaXN0XG4gICAgICAgICAgICByZXR1cm4gJGlucHV0LmZpbmQoJ2lucHV0Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gJGlucHV0O1xuICAgICAgICB9XG4gICAgfTtcblxufSkod2luZG93LmpRdWVyeSk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4uL2JhY2tlbmQvdmVuZG9yL3lpaXNvZnQveWlpMi9hc3NldHMveWlpLmFjdGl2ZUZvcm0uanNcbiAqKiBtb2R1bGUgaWQgPSAyMjFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ },

/***/ 222:
/***/ function(module, exports) {

	eval("/**\n * Yii Captcha widget.\n *\n * This is the JavaScript widget used by the yii\\captcha\\Captcha widget.\n *\n * @link http://www.yiiframework.com/\n * @copyright Copyright (c) 2008 Yii Software LLC\n * @license http://www.yiiframework.com/license/\n * @author Qiang Xue <qiang.xue@gmail.com>\n * @since 2.0\n */\n(function ($) {\n    $.fn.yiiCaptcha = function (method) {\n        if (methods[method]) {\n            return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));\n        } else if (typeof method === 'object' || !method) {\n            return methods.init.apply(this, arguments);\n        } else {\n            $.error('Method ' + method + ' does not exist on jQuery.yiiCaptcha');\n            return false;\n        }\n    };\n\n    var defaults = {\n        refreshUrl: undefined,\n        hashKey: undefined\n    };\n\n    var methods = {\n        init: function (options) {\n            return this.each(function () {\n                var $e = $(this);\n                var settings = $.extend({}, defaults, options || {});\n                $e.data('yiiCaptcha', {\n                    settings: settings\n                });\n\n                $e.on('click.yiiCaptcha', function () {\n                    methods.refresh.apply($e);\n                    return false;\n                });\n\n            });\n        },\n\n        refresh: function () {\n            var $e = this,\n                settings = this.data('yiiCaptcha').settings;\n            $.ajax({\n                url: $e.data('yiiCaptcha').settings.refreshUrl,\n                dataType: 'json',\n                cache: false,\n                success: function (data) {\n                    $e.attr('src', data.url);\n                    $('body').data(settings.hashKey, [data.hash1, data.hash2]);\n                }\n            });\n        },\n\n        destroy: function () {\n            return this.each(function () {\n                $(window).unbind('.yiiCaptcha');\n                $(this).removeData('yiiCaptcha');\n            });\n        },\n\n        data: function () {\n            return this.data('yiiCaptcha');\n        }\n    };\n})(window.jQuery);\n\n//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vYmFja2VuZC92ZW5kb3IveWlpc29mdC95aWkyL2Fzc2V0cy95aWkuY2FwdGNoYS5qcz83OWIzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyx5QkFBeUI7QUFDbkU7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQixhQUFhO0FBQ2IsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJmaWxlIjoiMjIyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBZaWkgQ2FwdGNoYSB3aWRnZXQuXG4gKlxuICogVGhpcyBpcyB0aGUgSmF2YVNjcmlwdCB3aWRnZXQgdXNlZCBieSB0aGUgeWlpXFxjYXB0Y2hhXFxDYXB0Y2hhIHdpZGdldC5cbiAqXG4gKiBAbGluayBodHRwOi8vd3d3LnlpaWZyYW1ld29yay5jb20vXG4gKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgMjAwOCBZaWkgU29mdHdhcmUgTExDXG4gKiBAbGljZW5zZSBodHRwOi8vd3d3LnlpaWZyYW1ld29yay5jb20vbGljZW5zZS9cbiAqIEBhdXRob3IgUWlhbmcgWHVlIDxxaWFuZy54dWVAZ21haWwuY29tPlxuICogQHNpbmNlIDIuMFxuICovXG4oZnVuY3Rpb24gKCQpIHtcbiAgICAkLmZuLnlpaUNhcHRjaGEgPSBmdW5jdGlvbiAobWV0aG9kKSB7XG4gICAgICAgIGlmIChtZXRob2RzW21ldGhvZF0pIHtcbiAgICAgICAgICAgIHJldHVybiBtZXRob2RzW21ldGhvZF0uYXBwbHkodGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG1ldGhvZCA9PT0gJ29iamVjdCcgfHwgIW1ldGhvZCkge1xuICAgICAgICAgICAgcmV0dXJuIG1ldGhvZHMuaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJC5lcnJvcignTWV0aG9kICcgKyBtZXRob2QgKyAnIGRvZXMgbm90IGV4aXN0IG9uIGpRdWVyeS55aWlDYXB0Y2hhJyk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICByZWZyZXNoVXJsOiB1bmRlZmluZWQsXG4gICAgICAgIGhhc2hLZXk6IHVuZGVmaW5lZFxuICAgIH07XG5cbiAgICB2YXIgbWV0aG9kcyA9IHtcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciAkZSA9ICQodGhpcyk7XG4gICAgICAgICAgICAgICAgdmFyIHNldHRpbmdzID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBvcHRpb25zIHx8IHt9KTtcbiAgICAgICAgICAgICAgICAkZS5kYXRhKCd5aWlDYXB0Y2hhJywge1xuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nczogc2V0dGluZ3NcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICRlLm9uKCdjbGljay55aWlDYXB0Y2hhJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2RzLnJlZnJlc2guYXBwbHkoJGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlZnJlc2g6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciAkZSA9IHRoaXMsXG4gICAgICAgICAgICAgICAgc2V0dGluZ3MgPSB0aGlzLmRhdGEoJ3lpaUNhcHRjaGEnKS5zZXR0aW5ncztcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiAkZS5kYXRhKCd5aWlDYXB0Y2hhJykuc2V0dGluZ3MucmVmcmVzaFVybCxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgIGNhY2hlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAkZS5hdHRyKCdzcmMnLCBkYXRhLnVybCk7XG4gICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5kYXRhKHNldHRpbmdzLmhhc2hLZXksIFtkYXRhLmhhc2gxLCBkYXRhLmhhc2gyXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZGVzdHJveTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJCh3aW5kb3cpLnVuYmluZCgnLnlpaUNhcHRjaGEnKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZURhdGEoJ3lpaUNhcHRjaGEnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGRhdGE6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEoJ3lpaUNhcHRjaGEnKTtcbiAgICAgICAgfVxuICAgIH07XG59KSh3aW5kb3cualF1ZXJ5KTtcblxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuLi9iYWNrZW5kL3ZlbmRvci95aWlzb2Z0L3lpaTIvYXNzZXRzL3lpaS5jYXB0Y2hhLmpzXG4gKiogbW9kdWxlIGlkID0gMjIyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9");

/***/ }

})